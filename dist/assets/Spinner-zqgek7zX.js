import{o,y as n,X as h,cr as m,K as u}from"./index-8ERthB3p.js";import{O as b,n as y}from"./jsxFactory-BxQYPm-b.js";import{l as M}from"./AnchorElementViewModel-Bb21xlFI.js";const _="esri.widgets.CompassViewModel";let l=class extends M{constructor(e){super(e),this.visible=!1}};o([n()],l.prototype,"visible",void 0),l=o([h(_)],l);const v=l,a="esri-spinner",c={base:a,spinnerStart:`${a}--start`,spinnerFinish:`${a}--finish`};let s=class extends b{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new v}initialize(){this.addHandles(m(()=>this.visible,i=>this._visibleChange(i)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(i){this.viewModel.location=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}get visible(){return this.viewModel.visible}set visible(i){this.viewModel.visible=i}show(i){const{location:e,promise:t}=i??{};e&&(this.viewModel.location=e),this.visible=!0;const r=()=>this.hide();t&&t.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,t=!!e,r=i&&t,d=!i&&t,p={[c.spinnerStart]:r,[c.spinnerFinish]:d},w=this._getPositionStyles();return y("div",{class:this.classes(c.base,p),styles:w})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=u(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(e==null||i==null)return{};const{padding:t}=e;return{left:i.x-t.left+"px",top:i.y-t.top+"px"}}};o([n()],s.prototype,"location",null),o([n()],s.prototype,"view",null),o([n({type:v})],s.prototype,"viewModel",void 0),o([n()],s.prototype,"visible",null),s=o([h("esri.widgets.Spinner")],s);const x=s;export{v as c,x as h};
