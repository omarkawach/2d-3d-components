import{aA as r,aB as n,aC as h,aD as o}from"./index-8ERthB3p.js";import{p as s,q as d,i as l}from"./index-f6afcedb-CZuD5wYN.js";import{r as c,i as m,c as w,a as u}from"./component-utils-858627d8-DRqmNtSu.js";import{o as y}from"./disconnected-e221dd46-DyoRKtII.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.29/esri/copyright.txt for details.
 * v4.29.10
 */const f="",v=class{constructor(e){r(this,e),this.arcgisDirectionsReady=n(this,"arcgisDirectionsReady",7),this._watchHandles=[],this.referenceElement=void 0,this.apiKey=void 0,this.icon=void 0,this.routeLayerItemId=void 0,this.lastRoute=void 0,this.layer=void 0,this.maxStops=50,this.searchProperties=void 0,this.unit=void 0,this.useDefaultRouteLayer=!0,this.visibleElementsLayerDetails=!0,this.visibleElementsSaveAsButton=!0,this.visibleElementsSaveButton=!0,this.position="bottom-left",this.view=void 0,this.widget=void 0}referenceElementWatcher(e){c(this,e)}apiKeyWatcher(e){e&&this.widget&&(this.widget.apiKey=e)}iconWatcher(e){e&&this.widget&&(this.widget.icon=e,this.widget.iconClass=e)}routeLayerItemIdWatcher(e){var t;m(e)?((t=this.view)==null||t.map.remove(this.layer),this.useDefaultRouteLayer&&s({}).then(i=>{this.layer=i})):e&&this.widget&&s({portalItem:{id:e}}).then(i=>{this.layer=i})}layerWatcher(e,t){var i,a;t&&((i=this.view)==null||i.map.remove(t)),e&&this.widget?(this.widget.layer=e,(a=this.view)==null||a.map.add(this.layer)):e||(this.widget.layer=null)}maxStopsWatcher(e){e!==void 0&&this.widget&&(this.widget.maxStops=e)}searchPropertiesWatcher(e){this.widget&&(this.widget.searchProperties=e)}unitWatcher(e){this.widget&&(this.widget.unit=e)}visibleElementsLayerDetailsWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,layerDetails:e})}visibleElementsSaveAsButtonWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,saveAsButton:e})}visibleElementsSaveButtonWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,saveButton:e})}positionWatcher(e){e!==void 0&&this.widget&&this.view.ui.move(this.childElem,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e,this.layer&&this.widget.view.map.add(this.layer))}async getDirections(){var e;return await((e=this.widget)==null?void 0:e.getDirections())}async save(){var e;return await((e=this.widget)==null?void 0:e.save())}async saveAs(e,t){var i;return await((i=this.widget)==null?void 0:i.saveAs(e,t))}async zoomToRoute(){var e;(e=this.widget)==null||e.zoomToRoute()}async componentDidLoad(){const e=await this._createParams(),t=await d(e);this.widget=t,await this._addWatchers(),this._addContainer(),this.arcgisDirectionsReady.emit(),w(this)}disconnectedCallback(){y(this)}render(){return h("div",{ref:e=>this.childElem=e})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:e}=await l();u(this,e(()=>this.widget.lastRoute,t=>this.lastRoute=t,{initial:!0}))}async _createParams(){var t;const e={};return e.visibleElements={layerDetails:this.visibleElementsLayerDetails,saveAsButton:this.visibleElementsSaveAsButton,saveButton:this.visibleElementsSaveButton},this.view&&(e.view=this.view),this.apiKey&&(e.apiKey=this.apiKey),this.icon&&(e.icon=this.icon,e.iconClass=this.icon),this.routeLayerItemId?(e.layer=await s({portalItem:{id:this.routeLayerItemId}}),this.layer=e.layer):this.layer?(e.layer=this.layer,this.layer=e.layer):this.useDefaultRouteLayer&&(e.layer=await s({}),this.layer=e.layer),this.layer!==void 0&&((t=this.view)==null||t.map.add(this.layer)),this.maxStops!==void 0&&(e.maxStops=this.maxStops),this.searchProperties&&(e.searchProperties=this.searchProperties),this.unit&&(e.unit=this.unit),e}get el(){return o(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],apiKey:["apiKeyWatcher"],icon:["iconWatcher"],routeLayerItemId:["routeLayerItemIdWatcher"],layer:["layerWatcher"],maxStops:["maxStopsWatcher"],searchProperties:["searchPropertiesWatcher"],unit:["unitWatcher"],visibleElementsLayerDetails:["visibleElementsLayerDetailsWatcher"],visibleElementsSaveAsButton:["visibleElementsSaveAsButtonWatcher"],visibleElementsSaveButton:["visibleElementsSaveButtonWatcher"],position:["positionWatcher"],view:["viewWatcher"]}}};v.style=f;export{v as arcgis_directions};
