import{aA as d,aB as c,aC as e,aF as h,aD as v}from"./index-8ERthB3p.js";import{i as f}from"./index-f6afcedb-CZuD5wYN.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.29/esri/copyright.txt for details.
 * v4.29.10
 */const E=class{constructor(i){d(this,i),this.versionItemActionClickedEvent=c(this,"versionItemActionClickedEvent",7),this.strings=void 0,this.hasAdvEditingUte=void 0,this.isVersioningApiAvailable=void 0,this.versionInfo=void 0}render(){const{strings:{actions:i},versionInfo:t}=this,n=t.versionIdentifier.name,o=t.versionIdentifier.guid,s=`actionSwitchToVersion_${o}`;return e(h,null,e("calcite-list-item",{description:n.split(".")[0],label:n.split(".")[1],value:o},e("calcite-action",{id:s,icon:"switch",text:"",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"changeVersion",versionInfo:t})},slot:"actions-start"}),e("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:s},e("span",null,i.switchToVersion)),e("calcite-action-menu",{"overlay-positioning":"fixed",slot:"actions-end",label:""},e("calcite-action",{icon:"switch",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"changeVersion",versionInfo:t})},scale:"s",text:i.switchToVersion,textEnabled:!0}),e("calcite-action",{disabled:n.toUpperCase()==="SDE.DEFAULT"||!this.hasAdvEditingUte||!this.isVersioningApiAvailable,icon:"edit-attributes",onClick:()=>{this.versionItemActionClickedEvent.emit({actionType:"editVersion",versionInfo:t})},scale:"s",text:i.editVersion,textEnabled:!0}))))}get _hostElement(){return v(this)}},A=class{constructor(i){d(this,i),this.versionItemActionClickedEventWithServiceUrl=c(this,"versionItemActionClickedEventWithServiceUrl",7),this.versionListActionClickedEvent=c(this,"versionListActionClickedEvent",7),this._watchHandles=[],this.heading=void 0,this.serviceName=void 0,this.serviceUrl=void 0,this.strings=void 0,this.userHasAdvancedEditingUserTypeExtension=void 0,this.versionInfos=void 0,this.viewModel=void 0,this.state=void 0}async componentDidLoad(){const{watch:i}=await f();this._watchHandles.push(i(()=>this.versionInfos,t=>{this.versionInfos=t}),i(()=>this.viewModel.state,t=>{this.state=t}))}async componentWillLoad(){this.state=this.viewModel.state}disconnectedCallback(){this._watchHandles.forEach(i=>{i.remove()}),this._watchHandles=[]}render(){const{heading:i,serviceName:t,serviceUrl:n,state:o,strings:s,versionInfos:a,viewModel:r}=this,l=r.versionIdentifierLookup.get(n);return e(h,null,e("calcite-flow-item",{heading:i,description:t},l?e("calcite-panel",{disabled:o==="executing",class:"panel-versions",heading:"Current version",description:l.name}):void 0,e("calcite-panel",{loading:o==="executing",class:"panel-versions",heading:a.length?`${s.headers.manageVersions} (${a.length})`:s.headers.manageVersions},e("calcite-action",{id:"actionRefreshVersions",icon:"refresh",text:"",onClick:()=>{this.versionListActionClickedEvent.emit({actionType:"refreshVersions",serviceUrl:n})},slot:"header-actions-end"}),e("calcite-tooltip",{"overlay-positioning":"fixed",referenceElement:"actionRefreshVersions"},e("span",null,s.actions.refreshVersions)),e("calcite-list",{class:"version-list",filterEnabled:!0},a.map(m=>e("arcgis-version-management-version-item",{strings:s,hasAdvEditingUte:r.advancedEditingUserTypeExtensionLookup.get(n),isVersioningApiAvailable:(r.serverVersionLookup.get(n)??0)>=11.2,versionInfo:m,onVersionItemActionClickedEvent:g=>{this.versionItemActionClickedEventWithServiceUrl.emit({...g.detail,serviceUrl:n})}}))),e("calcite-fab",{appearance:"outline-fill",slot:"fab",textEnabled:!0,text:s.actions.newVersion,onClick:()=>{this.versionListActionClickedEvent.emit({actionType:"newVersion",serviceUrl:n})}}))))}get _hostElement(){return v(this)}};export{E as arcgis_version_management_version_item,A as arcgis_version_management_version_list};
