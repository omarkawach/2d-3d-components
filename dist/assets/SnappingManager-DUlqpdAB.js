function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/FeatureServiceSnappingSource--32M0NEp.js","assets/index-8ERthB3p.js","assets/index-CzRN3C0i.css","assets/memoize-DsJmrG76.js","assets/UpdatingHandles-ugzlsvZF.js","assets/elevationInfoUtils-sHEwmo9N.js","assets/TileKey-DZd6gJy7.js","assets/boundedPlane-CLJ-Xnn_.js","assets/ObjectStack-BPo9QGhV.js","assets/mat4f64-Dk4dwAN8.js","assets/lineSegment-DVvvMBnG.js","assets/plane-Du3EYICn.js","assets/mat3f64-BBpwCtoL.js","assets/quatf64-BrpT0VRp.js","assets/vec2f64-Diu2Kaa8.js","assets/mathUtils-iSLnUy_4.js","assets/sphere-Bf4ezJdT.js","assets/layerViewUtils-Bi2wmOiN.js","assets/FeatureTileDescriptor3D-BLJXkD6Q.js","assets/angularMeasurementUtils-CATp35qy.js","assets/vec2-Dt9Foiri.js","assets/geodesicUtils-D1kRRrco.js","assets/geometry2dUtils-DoOkpuKA.js","assets/projectVectorToVector-C3SBBDgz.js","assets/projectPointToVector-qKp-AJ2b.js","assets/screenUtils-BuM_Fswi.js","assets/signal-DoM1gSF0.js","assets/Cyclical-BY9qISY1.js","assets/quantityUtils-9zDVxeky.js","assets/queryEngineUtils-CFWg6M0r.js","assets/VertexSnappingCandidate-C6L9NQCx.js","assets/PointSnappingHint-DFYGb6IS.js","assets/TileTreeDebugger-4lTkqSUZ.js","assets/WorkerHandle-DKpIZ9kk.js","assets/TileInfo-BsGWbS2H.js","assets/debugFlags-BbJIqrPU.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/viewUtils-DC86MEAQ.js","assets/geometryEngine-MBwx6Ib1.js","assets/geometryEngineBase-Cz__5BKm.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/hydrated-7yclY7Co.js","assets/projectVectorToWGS84ComparableLonLat-DuPw0-Mv.js","assets/geodesicMeasurementUtils-BcTpN3Xi.js","assets/FeatureCollectionSnappingSource-DhxFxnFv.js","assets/symbologySnappingCandidates-BKKcwF4Y.js","assets/GraphicsSnappingSource-BVh82YBi.js","assets/normalizeUtilsSync-CrK-RMPr.js","assets/normalizeUtilsCommon-DRIluWnF.js","assets/featureConversionUtils-BzfH5fda.js","assets/OptimizedFeature-CXeSoBCN.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/OptimizedGeometry-DLPswkPy.js","assets/FeatureStore-BZ4BTL-O.js","assets/BoundsStore-CvIYB3Tm.js","assets/PooledRBush-CjYPNqwP.js","assets/quickselect-D0_cvEX6.js","assets/timeSupport-BFvqZpey.js","assets/normalizeUtils-Cm7zySIZ.js","assets/utils-1zmckiYC.js","assets/utils-D-bI9C7C.js","assets/json-Wa8cmqdu.js","assets/optimizedFeatureQueryEngineAdapter-DY8fepQr.js","assets/centroid-DdLmOD72.js","assets/QueryEngine-BnxbU8wo.js","assets/WhereClause-CDY1MzWK.js","assets/TimeOnly-CdukLkzZ.js","assets/QueryEngineCapabilities-CTDe3LlQ.js","assets/utils-RSnx-Q9D.js","assets/utils-B6UP7_Wm.js","assets/utils-8IYHD2E1.js","assets/ClassBreaksDefinition-CNLSnW5r.js","assets/SnappingCandidate-O5eRSE6e.js","assets/Scheduler-DaHJO6l7.js","assets/RenderState-DaVlEYWY.js","assets/utils-j-RBNfeR.js","assets/cimSymbolUtils-DwzauUMk.js","assets/SceneLayerSnappingSource-7tbVQFgy.js","assets/EdgeWorkerHandle-CAkTfCpv.js","assets/workerHelper-CE2O_zfa.js","assets/InterleavedLayout-s3MgOYN8.js","assets/BufferView-CHYzaV9A.js","assets/types-D0PSWh4d.js","assets/Util-B8vYs4k8.js","assets/edgeProcessing-Crq4tMpw.js","assets/deduplicate-j8p9VETP.js","assets/Indices-DP3oX5Sg.js","assets/VertexAttribute-BnAa5VW0.js","assets/glUtil-DS73TAjp.js","assets/enums-DSseSvdG.js","assets/VertexElementDescriptor-BOD-G50G.js","assets/Normals-BAXqRpCA.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{o as p,y as f,X as q,bO as G,ak as N,P as Ae,d as it,mw as K,cr as Z,ej as ge,e_ as Ne,gL as ne,ja as ce,oN as st,h4 as nt,hj as rt,a0 as de,ds as je,hm as at,_ as Q,dC as ot,bZ as lt,cj as ct,bW as R,fE as dt,dg as qe,a1 as ht,T as Ge,dA as pt,dm as He,di as ut,fo as B,ft,dl as gt,bE as yt,cu as Te,dr as $e,dG as vt,g0 as _t}from"./index-8ERthB3p.js";import{w as _}from"./elevationInfoUtils-sHEwmo9N.js";import{p as V,z as Re,g as $,C as St,n as C,E as L,L as mt,s as ze,c as ye,F as v,f as g,D as ke,G as wt,H,I as We,J as re,K as ae,A as Ze,O as Et,l as oe,r as xt,b as ve,M as Pt,m as Tt,o as $t,h as Y,k as be}from"./angularMeasurementUtils-CATp35qy.js";import{b as U,m as _e,e as Ce,j as Rt,p as bt,d as Ct,_ as Lt}from"./vec2-Dt9Foiri.js";import{h as Ft}from"./UpdatingHandles-ugzlsvZF.js";import{o as Vt}from"./floorFilterUtils-DZ5C6FQv.js";import{t as It}from"./layerViewUtils-Bi2wmOiN.js";import{d as m}from"./viewUtils-DC86MEAQ.js";import{r as Mt,o as Ue}from"./Cyclical-BY9qISY1.js";import{i as z,s as Xe,l as Je}from"./quantityUtils-9zDVxeky.js";import{geodesicLength as Ke}from"./geometryEngine-MBwx6Ib1.js";import{t as Le}from"./projectVectorToWGS84ComparableLonLat-DuPw0-Mv.js";import{j as Se,v as Ot,z as Dt}from"./geodesicUtils-D1kRRrco.js";import{t as Qe}from"./geodesicMeasurementUtils-BcTpN3Xi.js";import{j as At,I as he,N as Nt}from"./geometry2dUtils-DoOkpuKA.js";import{n as me}from"./vec2f64-Diu2Kaa8.js";let M=class extends G{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new N}};p([f({constructOnly:!0})],M.prototype,"layer",void 0),p([f()],M.prototype,"enabled",void 0),p([f()],M.prototype,"updating",void 0),p([f()],M.prototype,"availability",void 0),p([f()],M.prototype,"sublayerSources",void 0),M=p([q("esri.views.interactive.snapping.FeatureSnappingLayerSource")],M);const Be=M;let S=class extends G{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new N,this.distance=V.distance,this.touchSensitivityMultiplier=V.touchSensitivityMultiplier,this.constraintsActive=!1}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){var c;const e=this.featureSources;e.some(Fe)&&Ae.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const t=e.filter(Gt),i=((c=this._get("_effectiveFeatureSources"))==null?void 0:c.filter(Fe))??new N;for(const l of t){const d=i.find(h=>h.layer===l.layer.parent);if(d)d.sublayerSources.includes(l)||d.sublayerSources.add(l);else if(l.layer.parent){const h=new Be({layer:l.layer.parent});h.sublayerSources.add(l),i.add(h)}}for(const l of i){const d=l.sublayerSources.filter(h=>!t.includes(h));l.sublayerSources.removeMany(d)}i.removeMany(i.filter(l=>l.sublayerSources.length===0));const s=e.filter(qt),r=this._get("_effectiveFeatureSources")??new N,{added:a,removed:o}=it(r.toArray(),[...s,...i]);return r.removeMany(o),r.addMany(a),r}};p([f()],S.prototype,"enabled",void 0),p([f()],S.prototype,"enabledToggled",void 0),p([f()],S.prototype,"forceDisabled",void 0),p([f()],S.prototype,"selfEnabled",void 0),p([f()],S.prototype,"featureEnabled",void 0),p([f({type:N.ofType(Be)})],S.prototype,"featureSources",void 0),p([f()],S.prototype,"distance",void 0),p([f()],S.prototype,"touchSensitivityMultiplier",void 0),p([f()],S.prototype,"constraintsActive",void 0),p([f({readOnly:!0})],S.prototype,"effectiveEnabled",null),p([f({readOnly:!0})],S.prototype,"effectiveSelfEnabled",null),p([f({readOnly:!0})],S.prototype,"effectiveFeatureEnabled",null),p([f({readOnly:!0})],S.prototype,"_effectiveFeatureSources",null),S=p([q("esri.views.interactive.snapping.SnappingOptions")],S);const jt=S;function Fe(n){return n.layer.type==="subtype-group"}function qt(n){return n.layer.type!=="subtype-group"}function Gt(n){return n.layer.type==="subtype-sublayer"}let T=class extends G{get layerView(){var e,t;return(t=(e=this.view)==null?void 0:e.allLayerViews)==null?void 0:t.find(i=>i.layer===this.layer)}get valid(){return this._valid}get subtypeFilter(){var r,a;const{layer:e,snappingSource:t}=this;if(!K(e)||!((r=e.subtypes)!=null&&r.length))return{mode:"not-in-use",filter:null};const i=t.layerSource.sublayerSources.filter(o=>{var c;return o.enabled&&o.layer.visible&&It((c=this.view)==null?void 0:c.scale,o.layer.effectiveScaleRange.minScale,o.layer.effectiveScaleRange.maxScale)}).map(o=>o.layer.subtypeCode);if(!i.length)return{mode:"none-visible",filter:null};if(i.length===e.subtypes.length)return{mode:"all-visible",filter:null};const s=((a=e.fieldsIndex.get(e.subtypeField))==null?void 0:a.name)??e.subtypeField;return i.length===1?{mode:"in-use",filter:`${s} = ${i.getItemAt(0)}`}:{mode:"in-use",filter:`${s} IN (${i.join(", ")})`}}get floorFilter(){const{view:e,layer:t}=this;return e&&t?Vt({view:e,layer:t}):null}constructor(e){super(e),this.rulesTable=null,this._valid=!1}initialize(){if(!this.snappingSource||!this.layer)return;const{layer:e,snappingSource:t}=this;if("refresh"in e){const i=e;this.addHandles(i.on("refresh",()=>t.refresh()))}this.loadRules(),this.addHandles([Z(()=>t.updating,i=>t.layerSource.updating=i,ge),Z(()=>t.availability,i=>t.layerSource.availability=i,ge)])}getFetchCandidatesParameters(e,t,i){var u,y,P,w,E;if(!this.valid)return[];const{layer:s,layerView:r,floorFilter:a,rulesTable:o,subtypeFilter:c}=this,l={distance:i,mode:((u=this.view)==null?void 0:u.type)??"2d",point:e,coordinateHelper:t.coordinateHelper,...this._types,filter:r&&"filter"in r?r.filter:null};if(a&&(l.filter=pe(l.filter,a)),c.mode!=="not-in-use"&&c.mode!=="all-visible"){if(c.mode==="none-visible")return[];l.filter?l.filter.where=Ne(l.filter.where,c.mode):l.filter=new ne({where:c.filter})}const d=t.feature,h=((y=d==null?void 0:d.sourceLayer)==null?void 0:y.type)==="subtype-sublayer"?d.sourceLayer.parent:d==null?void 0:d.sourceLayer;if(o&&d&&Re((P=this.view)==null?void 0:P.map)&&(ce(s)||K(s))&&s.layerId&&(ce(h)||K(h))&&((w=this.view.map.utilityNetworks)!=null&&w.find(x=>x.isUtilityLayer(h)))){if(o.loadStatus!=="loaded")return[];const x=[],X=s.layerId,I=(E=o.getFeatureSQL(h,d))==null?void 0:E[X];if(!I)return[];const J=I.anyVertex;let W=I.endVertex;return W&&J&&W===J&&(W=""),W&&x.push({...l,returnEdge:!1,vertexMode:"ends",filter:pe(l.filter,W)}),J&&x.push({...l,returnEdge:!1,vertexMode:"all",filter:pe(l.filter,J)}),x}return[l]}async loadRules(){var i,s;const{layer:e,view:t}=this;if(e&&t&&Re(t==null?void 0:t.map)&&(ce(e)||K(e))){const r=(i=t.map.utilityNetworks)==null?void 0:i.find(a=>a.isUtilityLayer(e));if(r)try{this.rulesTable=await r.getRulesTable(),await((s=this.rulesTable)==null?void 0:s.load())}catch{return void Ae.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",e.title)}}this._valid=!0}get _types(){return{returnEdge:!0,vertexMode:"all"}}remove(){this.destroy()}destroy(){var e;(e=this.snappingSource)==null||e.destroy()}};function pe(n,e){return n==null?new ne({where:e}):n.where?new ne({where:Ne(n.where,e)}):new ne({where:e})}p([f({constructOnly:!0})],T.prototype,"layer",void 0),p([f({constructOnly:!0})],T.prototype,"snappingSource",void 0),p([f({constructOnly:!0})],T.prototype,"view",void 0),p([f()],T.prototype,"layerView",null),p([f()],T.prototype,"rulesTable",void 0),p([f()],T.prototype,"valid",null),p([f()],T.prototype,"subtypeFilter",null),p([f()],T.prototype,"floorFilter",null),p([f()],T.prototype,"_valid",void 0),T=p([q("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],T);let k=class{constructor(e,t,i,s){this.targetPoint=e,this.constraint=t,this.isDraped=i,this.domain=s}},we=class extends k{constructor({targetPoint:e,objectId:t,constraint:i,isDraped:s}){super(e,i,s,$.FEATURE),this.objectId=t}},Ht=class extends we{constructor(e){super({...e,isDraped:!0,constraint:new St(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new C(L.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Ye=class extends we{constructor(e){super({...e,constraint:new mt(e.edgeStart,e.edgeEnd)})}get hints(){return[new C(L.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}};class Ee extends k{constructor({targetPoint:e,constraint:t,previousVertex:i,otherVertex:s,otherVertexType:r,objectId:a,isDraped:o}){super(e,t,o,$.SELF),this.previousVertex=i,this.otherVertex=s,this.otherVertexType=r,this.objectId=a}get hints(){const e=this.previousVertex,t=this.otherVertexType===j.CENTER?this.otherVertex:this.targetPoint,i=this.otherVertexType===j.CENTER?this.targetPoint:this.otherVertex;return[new C(L.TARGET,t,i,this.isDraped,this.domain),new C(L.REFERENCE,e,t,this.isDraped,this.domain),new ze(this.previousVertex,t,i,this.isDraped,this.domain)]}}var j;(function(n){n[n.NEXT=0]="NEXT",n[n.CENTER=1]="CENTER"})(j||(j={}));let O=class extends G{get updating(){return this._snappingSources.some(e=>e==null||e.valid&&e.snappingSource.updating)||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=$.FEATURE,this._updatingHandles=new Ft,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const e=st(()=>{var t;return(t=this.options)==null?void 0:t._effectiveFeatureSources},(t,i)=>this._createSourceInfo(t,i));this._snappingSources=e,this.addHandles(nt(e))}destroy(){this._set("options",null),this._updatingHandles.destroy()}async fetchCandidates(e,t,i,s){var c;if(!(t&this._domain&&this.options!=null&&this.options.effectiveFeatureEnabled))return[];const r=[],a=this._computeScreenSizeDistanceParameters(e,i);for(const l of this._snappingSources){if(l==null||!l.valid||!l.snappingSource.layerSource.enabled||(c=l.layerView)!=null&&c.suspended)continue;const d=l.getFetchCandidatesParameters(e,i,a);for(const h of d)r.push(l.snappingSource.fetchCandidates(h,s).then(u=>u.filter(y=>!this._candidateIsExcluded(l.snappingSource,y,i.excludeFeature))))}const o=(await rt(r)).flat();return this._addRightAngleCandidates(o,e,a,i),de(s),ye(e,o),o}_addRightAngleCandidates(e,t,i,s){var h,u,y,P,w,E,x,X;const r=s.vertexHandle!=null?(u=(h=s.vertexHandle.rightEdge)==null?void 0:h.rightVertex)==null?void 0:u.pos:s.editGeometryOperations!=null&&s.editGeometryOperations.data.type==="polygon"?(P=(y=s.editGeometryOperations.data.components[0])==null?void 0:y.getFirstVertex())==null?void 0:P.pos:null,a=s.vertexHandle!=null?(E=(w=s.vertexHandle.leftEdge)==null?void 0:w.leftVertex)==null?void 0:E.pos:s.editGeometryOperations!=null?(X=(x=s.editGeometryOperations.data.components[0])==null?void 0:x.getLastVertex())==null?void 0:X.pos:null,{view:o}=this,c=v(r,o,s),l=v(a,o,s),d=e.length;for(let I=0;I<d;I++)this._addRightAngleCandidate(e[I],l,t,i,e),this._addRightAngleCandidate(e[I],c,t,i,e)}_addRightAngleCandidate(e,t,i,s,r){if(t==null||!zt(e))return;const a=e.constraint.closestTo(t),o=(a[0]-i[0])/s.x,c=(a[1]-i[1])/s.y,{start:l,end:d}=e.constraint;if(o*o+c*c<=1){const h=new Ee({targetPoint:a,otherVertex:t,otherVertexType:j.NEXT,previousVertex:U(g(a),g(l))>U(g(a),g(d))?l:d,constraint:new ke(t,a),objectId:e.objectId,isDraped:e.isDraped});r.push(h)}}_computeScreenSizeDistanceParameters(e,t){let i=this.options!=null?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return this.view==null?{x:i,y:i,z:i,distance:i}:this.view.type==="2d"?(i*=this.view.resolution,{x:i,y:i,z:i,distance:i}):this._computeScreenSizeDistanceParameters3D(e,i,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,i,s){const{spatialReference:r}=s;i.renderCoordsHelper.toRenderCoords(e,r,Ve);const a=i.state.camera.computeScreenPixelSizeAt(Ve),o=a*i.renderCoordsHelper.unitInMeters,c=o/je(r),l=o/at(r),d=t*c,h=t*l,u=m(e,r,_,i),y=u?ue(u,e,c,0,0,i,s):0,P=u?ue(u,e,0,c,0,i,s):0,w=u?ue(u,e,0,0,l,i,s):0;return{x:y===0?0:d/y,y:P===0?0:d/P,z:w===0?0:h/w,distance:a*t}}_candidateIsExcluded(e,t,i){if(i==null)return!1;const s=this._getCandidateObjectId(t);if(s==null)return!1;const r=e.layerSource.layer;return r.type==="graphics"?i.uid===s:i.sourceLayer===r&&!(!i.attributes||!("objectIdField"in r))&&i.attributes[r.objectIdField]===s}_getCandidateObjectId(e){return e instanceof we?e.objectId:null}async _createSourceInfo(e,t){const i=e.layer;i.loaded||(await i.load(),de(t));const{view:s}=this,r=await this._createFeatureSnappingSourceType(e);return de(t),new T(r==null?{}:{snappingSource:r,view:s,layer:i})}async _createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}async _createFeatureSnappingSourceSceneLayer(e){const{view:t}=this;return t==null||t.type!=="3d"?null:new(await this._getSourceModule("scene")).SceneLayerSnappingSource({layerSource:e,view:t})}async _createFeatureSnappingSourceFeatureLayer(e){var t;switch((t=e.layer.source)==null?void 0:t.type){case"feature-layer":case"oriented-imagery":return new(await this._getSourceModule("featureService")).FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e});case"memory":case"csv":case"geojson":case"wfs":return e.layer.geometryType==="mesh"?null:new(await this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource({layerSource:e,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(e){return new(await this._getSourceModule("graphics")).GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _createFeatureSnappingSourceMapNotesLayer(e){return new(await this._getSourceModule("notes")).GraphicsSnappingSource({getGraphicsLayers:()=>{var t;return((t=e.layer.sublayers)==null?void 0:t.toArray())??[]},spatialReference:this.spatialReference,view:this.view,layerSource:e})}async _getSourceModule(e){const t=this._sourceModules[e];if(t.loader==null){const i=this._loadSourceModule(e),s={module:null,loader:i};this._sourceModules[e]=s;const r=await i,a={module:r,loader:i};return this._sourceModules[e]=a,r}return t.module==null?t.loader:t.module}_loadSourceModule(e){const t=this._updatingHandles;switch(e){case"featureService":return t.addPromise(Q(()=>import("./FeatureServiceSnappingSource--32M0NEp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43])));case"featureCollection":return t.addPromise(Q(()=>import("./FeatureCollectionSnappingSource-DhxFxnFv.js"),__vite__mapDeps([44,1,2,3,5,19,20,14,21,11,12,9,13,15,16,8,22,23,24,25,26,27,28,29,30,31,45,4,36,17,37,38,39,40,41,42,43])));case"graphics":case"notes":return t.addPromise(Q(()=>import("./GraphicsSnappingSource-BVh82YBi.js"),__vite__mapDeps([46,1,2,3,4,47,48,49,50,51,52,53,54,55,56,40,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,26,35,74,5,75,76,19,20,14,21,11,12,9,13,15,16,8,22,23,24,25,27,28,29,30,31,45,36,17,37,38,39,41,42,43])));case"scene":return t.addPromise(Q(()=>import("./SceneLayerSnappingSource-7tbVQFgy.js"),__vite__mapDeps([77,1,2,4,78,33,79,80,81,20,82,83,14,84,85,86,87,88,89,90,91,16,8,11,12,9,13,15,19,21,22,23,24,25,26,5,27,28,30,31,36,17,37,38,39,40,41,42,43])))}}get test(){return{snappingSources:this._snappingSources}}};function zt(n){return(n instanceof Ye||n instanceof Ht)&&!kt(n)}function kt({constraint:{start:n,end:e}}){const t=ot(n,e),i=U(g(n),g(e));return t<lt()||i/t<Zt}function ue(n,e,t,i,s,r,{spatialReference:a}){const o=ct(Wt,e);o[0]+=t,o[1]+=i,o[2]+=s;const c=m(o,a,_,r);return c?wt(c,n):1/0}p([f({constructOnly:!0})],O.prototype,"spatialReference",void 0),p([f({constructOnly:!0})],O.prototype,"view",void 0),p([f()],O.prototype,"options",void 0),p([f({readOnly:!0})],O.prototype,"updating",null),p([f()],O.prototype,"_snappingSources",void 0),O=p([q("esri.views.interactive.snapping.FeatureSnappingEngine")],O);const Ve=R(),Wt=R(),Zt=1e-4;let le=class{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=V.shortLineThreshold*V.shortLineThreshold}snap(e,t){return t.vertexHandle!=null?t.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold(v(e.leftVertex.pos,this.view,t),v(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:i}){return this.squaredShortLineThreshold===0||H(m(t,i,_,this.view),m(e,i,_,this.view))>this.squaredShortLineThreshold}isVertical(e,t,{spatialReference:i}){const s=je(i);return _e(g(e),g(t))*s<V.verticalLineThresholdMeters}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}},et=class extends k{constructor({lineStart:e,lineEnd:t,targetPoint:i,isDraped:s}){super(i,new We(e,t),s,$.SELF),this._referenceLineHint=new C(L.REFERENCE_EXTENSION,e,t,s,this.domain)}get hints(){return[this._referenceLineHint,new C(L.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}};function Ut({hasZ:n,spatialReference:e,paths:t},i,s=0){const r=dt(e);if(r==null)return!1;const a=n?o=>o:o=>qe(Xt,o[0],o[1],s);for(const o of t){const c=[];for(const l of o){const d=[0,0,s];r(a(l),0,d,0),c.push(d)}i.push(c)}return!0}const Xt=R();function Di(n){const{spatialReference:e}=n;return Qe(e,Bt,Yt,ei,n)}function Ai(n,e){if(!ht(n.spatialReference,e.spatialReference))return null;const{spatialReference:t}=n;return ee[0]=n.x,ee[1]=n.y,ee[2]=n.hasZ?n.z:0,te[0]=e.x,te[1]=e.y,te[2]=e.hasZ?e.z:0,xe(ee,te,t)}function xe(n,e,t){return Qe(t,Jt,Kt,Qt,n,e,t)}function Jt(n,e,t){return z(Se(Pe,n,e,t).distance,"meters")}function Kt(n,e,t){return z(Ke(ti(n,e,t),"meters"),"meters")}function Qt(n,e,t){return Le(n,t,Ie)&&Le(e,t,Me)?z(Se(Pe,Ie,Me,Ge.WGS84).distance,"meters"):null}function Bt(n){return z(Ot([n],"meters")[0],"meters")}function Yt(n){return z(Ke(n,"meters"),"meters")}function ei(n){const e=[];if(!Ut(n,e))return null;let t=0;for(const i of e){let s=0;for(let r=1;r<i.length;++r)s+=Se(Pe,i[r-1],i[r],Ge.WGS84).distance;t+=s}return z(t,"meters")}function ti(n,e,t){return{type:"polyline",spatialReference:t,paths:[[[...n],[...e]]]}}const Pe=new Dt,ee=R(),te=R(),Ie=R(),Me=R();let ii=class extends le{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=i.edges.length,r=[];if(s<1)return r;const{spatialReference:a}=t,o=m(e,a,_,this.view),{view:c}=this,l=i.edges[s-1];let d=l;do{if(this.edgeExceedsShortLineThreshold(d,t)){const h=re(d,c,t);this._processCandidateProposal(h.left,h.right,e,o,t,r)}d=d.leftVertex.leftEdge}while(d&&d!==l);return r}snapExistingVertex(e,t){const i=[],s=t.vertexHandle,r=s.component;if(r.edges.length<2)return i;const{view:a}=this,{spatialReference:o}=t,c=m(e,o,_,a),l=s.leftEdge,d=s.rightEdge;l&&d&&this.edgeExceedsShortLineThreshold(l,t)&&this.edgeExceedsShortLineThreshold(d,t)&&this._processCandidateProposal(v(l.leftVertex.pos,a,t),v(d.rightVertex.pos,a,t),e,c,t,i);const h=r.edges[0];let u=h;do{if(u!==s.leftEdge&&u!==s.rightEdge&&this.edgeExceedsShortLineThreshold(u,t)){const y=re(u,a,t);this._processCandidateProposal(y.left,y.right,e,c,t,i)}u=u.rightVertex.rightEdge}while(u&&u!==h);return i}_processCandidateProposal(e,t,i,s,r,a){var h;const{spatialReference:o,pointer:c}=r,l=R();this._projectedLine(l,e,t,i,r);const d=oe(l);H(s,m(d,o,_,this.view))<this.squaredProximityThreshold(c)&&a.push(new et({lineStart:e,lineEnd:t,targetPoint:d,isDraped:((h=r.elevationInfo)==null?void 0:h.mode)==="on-the-ground"}))}_projectedLine(e,t,i,s,r){this._projectToLineGeodesic(e,t,i,s,r)||this._projectToLinePlanar(e,s,t,i)}_projectToLineGeodesic(e,t,i,s,{spatialReference:r}){const a=ae(t,i,r,r);if(a==null)return!1;const o=ae(i,s,r,r);if(o==null)return!1;const c=xe(i,s,r);if(c==null)return!1;const l=Math.abs(Mt.shortestSignedDiff(a,o))>Math.PI/2?Ue.normalize(a+Math.PI):a;return Ze(e,i,r,Xe(c,"meters"),Je(l,"radians","geographic"),"geodesic"),e[2]=s[2],!0}_projectToLinePlanar(e,t,i,s){Et(t,{start:i,end:s,type:At.LINE},e),e[2]=t[2]}},tt=class extends k{constructor({referenceLine:e,lineStart:t,targetPoint:i,isDraped:s}){const r=pt(t),{left:a,right:o}=e;He(r,ut(r,r,o),a),super(i,new We(t,oe(r)),s,$.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new C(L.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new xt(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new C(L.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(i=>{B(e.right,i.edge.left)&&(i.fadeLeft=!1,t.fadeRight=!1),B(e.right,i.edge.right)&&(i.fadeRight=!1,t.fadeRight=!1),B(e.left,i.edge.right)&&(i.fadeRight=!1,t.fadeLeft=!1),B(e.left,i.edge.left)&&(i.fadeLeft=!1,t.fadeLeft=!1)}),this._referenceLines.push(t)}},si=class extends le{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=i.edges.length,r=i.vertices.length,a=[];if(s<2)return a;const{view:o}=this,c=m(e,t.spatialReference,_,o),l=v(i.vertices[r-1].pos,o,t),d=v(i.vertices[0].pos,o,t),h=i.edges[s-1];let u=h;do{if(this.edgeExceedsShortLineThreshold(u,t)){const y=re(u,o,t);this._checkEdgeForParallelLines(y,l,e,c,t,a),this._checkEdgeForParallelLines(y,d,e,c,t,a)}u=u.leftVertex.leftEdge}while(u&&u!==h);return a}snapExistingVertex(e,t){const i=[],s=t.vertexHandle,r=s.component;if(r.edges.length<3)return i;const{view:a}=this,o=m(e,t.spatialReference,_,a),c=s.leftEdge,l=s.rightEdge,d=r.vertices[0],h=v(d.pos,a,t),u=r.vertices.length,y=r.vertices[u-1],P=v(y.pos,a,t),w=r.edges[0];let E=w;do{if(E!==c&&E!==l&&this.edgeExceedsShortLineThreshold(E,t)){const x=re(E,a,t);c&&this._checkEdgeForParallelLines(x,v(c.leftVertex.pos,a,t),e,o,t,i),l&&this._checkEdgeForParallelLines(x,v(l.rightVertex.pos,a,t),e,o,t,i),s===d?this._checkEdgeForParallelLines(x,P,e,o,t,i):s===y&&this._checkEdgeForParallelLines(x,h,e,o,t,i)}E=E.rightVertex.rightEdge}while(E&&E!==w);return i}_checkEdgeForParallelLines(e,t,i,s,r,a){var u;const o=e.left,c=e.right;if(he(D,g(t),g(o),g(c)),U(D,g(t))<V.parallelLineThreshold)return;he(D,g(i),g(o),g(c),g(t));const{spatialReference:l,pointer:d}=r,h=ve(D[0],D[1],i[2]);if(H(s,m(h,l,_,this.view))<this.squaredProximityThreshold(d)){if(this.isVertical(h,t,r)||this.isVertical(o,c,r)||this._parallelToPreviousCandidate(e,a))return;a.push(new tt({referenceLine:e,lineStart:t,targetPoint:h,isDraped:((u=r.elevationInfo)==null?void 0:u.mode)==="on-the-ground"}))}}_parallelToPreviousCandidate(e,t){const i=e.left,s=e.right;for(const r of t)if(he(D,g(s),g(r.constraint.start),g(r.constraint.end),g(i)),U(D,g(s))<V.parallelLineThreshold)return r.addReferenceLine(e),!0;return!1}};const D=me();class ni extends le{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=[];if(i.vertices.length<2)return s;const{view:r}=this,a=m(e,t.spatialReference,_,r),o=i.vertices.at(-1);this._checkForSnappingCandidate(s,o.leftEdge,o,o.leftEdge.leftVertex,e,a,t);const c=i.vertices[0];return this._checkForSnappingCandidate(s,c.rightEdge,c,c.rightEdge.rightVertex,e,a,t),s}snapExistingVertex(e,t){const i=[],s=t.vertexHandle;if(s.component.vertices.length<3)return i;const{view:r}=this,a=m(e,t.spatialReference,_,r),o=s.leftEdge,c=s.rightEdge;if(o!=null&&o.leftVertex.leftEdge){const l=o.leftVertex.leftEdge;this._checkForSnappingCandidate(i,l,l.rightVertex,l.leftVertex,e,a,t)}if(c!=null&&c.rightVertex.rightEdge){const l=c.rightVertex.rightEdge;this._checkForSnappingCandidate(i,l,l.leftVertex,l.rightVertex,e,a,t)}return i}_checkForSnappingCandidate(e,t,i,s,r,a,o){if(!this.edgeExceedsShortLineThreshold(t,o))return;const c=this.view,l=v(i.pos,c,o),d=v(s.pos,c,o);this._checkForSnappingCandidateNormalized(e,d,l,r,a,o)}_checkForSnappingCandidateNormalized(e,t,i,s,r,a){this._projectionRay(Oe,t,i,s,a),this._checkForSnappingCandidateAlongProjectedRay(e,t,i,Oe,s,r,a)}_projectionRay(e,t,i,s,r){this._projectionRayGeodesic(e,t,i,s,r)||this._projectionRayPlanar(e,t,i)}_projectionRayGeodesic(e,t,i,s,{spatialReference:r}){const a=ae(t,i,r,r);if(a==null)return!1;const o=ae(i,s,r,r);if(o==null)return!1;const c=Math.sign(Ue.shortestSignedDiff(a,o))*Math.PI*.5,l=Je(a+c,"radians","geographic"),d=R(),h=xe(i,s,r);return h!=null&&(Ze(d,i,r,Xe(h,"meters"),l,"geodesic"),He(e,d,i),!0)}_projectionRayPlanar(e,t,i){const s=Ce(fe,g(i),g(t));qe(e,s[1],-s[0],0)}_checkForSnappingCandidateAlongProjectedRay(e,t,i,s,r,a,o){var w;const{spatialReference:c,pointer:l}=o,d=Ce(fe,g(r),g(i)),h=Rt(s,d)/bt(s),u=Ct(fe,g(i),s,h),y=ve(u[0],u[1],r[2]);if(H(a,m(y,c,_,this.view))>this.squaredProximityThreshold(l)||this.isVertical(y,i,o)||this.isVertical(i,t,o))return;const P=ft(R(),i,s,Math.sign(h));e.push(new Ee({targetPoint:y,constraint:new ke(i,oe(P)),previousVertex:t,otherVertex:i,otherVertexType:j.CENTER,isDraped:((w=o.elevationInfo)==null?void 0:w.mode)==="on-the-ground"}))}}const fe=me(),Oe=R();class ri extends k{constructor({targetPoint:e,point1:t,point2:i,isDraped:s}){super(e,new Pt(oe(gt(R(),t,i,.5)),.5*_e(g(t),g(i))),s,$.SELF),this._p1=t,this._p2=i}get hints(){return[new C(L.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new C(L.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new ze(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}class ai extends le{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],s=[],r=i.vertices.length;if(t.editGeometryOperations.data.type!=="polygon"||r<2)return s;const{view:a}=this,o=i.vertices[0],c=i.vertices[r-1],l=v(o.pos,a,t),d=v(c.pos,a,t);return this._processCandidateProposal(l,d,e,t,s),s}snapExistingVertex(e,t){const i=[],s=t.vertexHandle,r=s.component;if(r.edges.length<2||t.editGeometryOperations.data.type==="polyline"&&(s.index===0||s.index===r.vertices.length-1))return i;const{view:a}=this,o=v(s.leftEdge.leftVertex.pos,a,t),c=v(s.rightEdge.rightVertex.pos,a,t);return this._processCandidateProposal(o,c,e,t,i),i}_processCandidateProposal(e,t,i,s,r){var y;if(!this.exceedsShortLineThreshold(e,t,s))return;const a=Lt(De,g(e),g(t),.5),o=.5*_e(g(e),g(t)),c=Nt(De,g(i),a,o),l=ve(c[0],c[1],i[2]),{spatialReference:d,pointer:h}=s,u=m(i,d,_,this.view);if(H(u,m(l,d,_,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(e,l,s)||this.isVertical(l,t,s))return;r.push(new ri({targetPoint:l,point1:e,point2:t,isDraped:((y=s.elevationInfo)==null?void 0:y.mode)==="on-the-ground"}))}}}const De=me();let A=class extends G{constructor(n){super(n),this.updating=!1,this._snappers=new N,this._domain=$.SELF}initialize(){this._snappers.push(new si(this.view,this.options),new ii(this.view,this.options),new ni(this.view,this.options),new ai(this.view,this.options))}set options(n){this._set("options",n);for(const e of this._snappers)e.options=n}async fetchCandidates(n,e,t){if(!(e&this._domain&&this.options.effectiveSelfEnabled))return[];const i=[];for(const s of this._snappers.items)for(const r of s.snap(n,t))i.push(r);return ye(n,i),i}};p([f({readOnly:!0})],A.prototype,"updating",void 0),p([f({constructOnly:!0})],A.prototype,"view",void 0),p([f()],A.prototype,"options",null),A=p([q("esri.views.interactive.snapping.SelfSnappingEngine")],A);function oi(n,e){return[new A({view:n,options:e}),new O({view:n,options:e,spatialReference:n.spatialReference})]}class ie extends k{constructor(e,t,i,s){super(e,new Tt(e),s,$.ALL),this.first=t,this.second=i}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new $t(this.targetPoint,this.isDraped,this.domain)]}}let b=class extends yt.EventedMixin(G){constructor(n){super(n),this.options=new jt,this.snappingEnginesFactory=oi,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=F.MAIN}initialize(){this.addHandles([Z(()=>{const{effectiveFeatureEnabled:n,effectiveSelfEnabled:e,touchSensitivityMultiplier:t,distance:i,constraintsActive:s}=this.options;return{effectiveFeatureEnabled:n,effectiveSelfEnabled:e,touchSensitivityMultiplier:t,distance:i,constraintsActive:s}},()=>{this.doneSnapping(),this.emit("changed")},Te),Z(()=>this.options,n=>{for(const e of this._engines)e.options=n},Te),Z(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:n,snappingEnginesFactory:e})=>this._recreateEngines(n,e),ge)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(n=>n.updating)}_recreateEngines(n,e){if(this._destroyEngines(),!n)return;const{view:t,options:i}=this;this._engines=e(t,i)}_destroyEngines(){for(const n of this._engines)n.destroy();this._engines=[]}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:n,touchSensitivityMultiplier:e}=this.options,t=n*e;return t*t}get _squaredSatisfiesConstraintThreshold(){return V.satisfiesConstraintScreenThreshold*V.satisfiesConstraintScreenThreshold}snap(n){return li(n)?this._snapMultiPoint(n):this._snapSinglePoint(n)}update(n){const{point:e,context:t}=n;this._removeVisualization();const i=this._currentMainCandidate;if(i==null)return e;const s=this._selectUpdateInput(n);if(s==null)return e;const{spatialReference:r}=t,a=$e(s,r);if(a==null)return e;const{view:o}=this,{elevationInfo:c,visualizer:l}=t,d=[],h=Y(a,o,c),u=i.constraint.closestTo(h);if(!this._arePointsWithinScreenThreshold(h,u,t))return this._resetSnappingState(),e;i.targetPoint=u,d.push(...i.hints);for(const y of this._currentOtherActiveCandidates)y.targetPoint=u,d.push(...y.hints);return l!=null&&this.addHandles(l.draw(d,{spatialReference:r,elevationInfo:ci(t),view:o,selfSnappingZ:t.selfSnappingZ}),se),be(u,o,e,t)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:n,scenePoint:e}){switch(this._currentSnappedType){case F.MAIN:return n;case F.SCENE:return e}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=F.MAIN}_removeVisualization(){this.removeHandles(se)}async _snapSinglePoint({point:n,context:e,signal:t}){const{view:i}=this,{elevationInfo:s}=e,r=Y(n,i,s),a=await this._fetchCandidates(r,$.ALL,e,t);return this._createSnapResult(r,F.MAIN,a,i,n,e,t)}async _snapMultiPoint({point:n,scenePoint:e,context:t,signal:i}){const{view:s}=this,{coordinateHelper:r,elevationInfo:a,spatialReference:o}=t;await vt(e.spatialReference,o);const c=$e(e,o),l=Y(c,s,a),d=await this._fetchCandidates(l,$.FEATURE,t,i);if(d.length>0){const y=await this._fetchCandidates(l,$.SELF,t,i);return this._createSnapResult(l,F.SCENE,[...d,...y],s,c,t,i)}const h=Y(n,s,a),u=await this._fetchCandidates(h,$.SELF,t,i);return this._createSnapResult(h,F.MAIN,u,s,{z:r.hasZ()&&n.hasZ?n.z??0:void 0,m:r.hasM()&&n.hasM?n.m??0:void 0},t,i)}async _fetchCandidates(n,e,t,i){return(await Promise.all(this._engines.map(s=>s.fetchCandidates(n,e,t,i)))).flat()}_createSnapResult(n,e,t,i,s,r,a){return{get valid(){return!_t(a)},apply:()=>{const{spatialReference:o}=r,{snappedPoint:c,hints:l}=this._processCandidates(n,e,t,r);return this._removeVisualization(),r.visualizer!=null&&this.addHandles(r.visualizer.draw(l,{spatialReference:o,elevationInfo:_,view:i,selfSnappingZ:r.selfSnappingZ}),se),be(c,i,s,r)}}}_processCandidates(n,e,t,i){if(t.length<1)return this.doneSnapping(),{snappedPoint:n,hints:[]};this._currentSnappedType!==e&&this._resetSnappingState(),ye(n,t);const s=this._currentMainCandidate;if(s!=null){const r=this._findOldConstraintInNewCandidates(s,t);if(r>=0){if(!(t[r]instanceof ie))return this._intersectWithOtherCandidates(r,t,n,e,i);if(this._arePointsWithinScreenThreshold(n,s.targetPoint,i))return this._updateSnappingCandidate(s,e,t,i)}}return this._intersectWithOtherCandidates(0,t,n,e,i)}_findOldConstraintInNewCandidates(n,e){return n instanceof ie?this._findOldCandidateIndex(e,n.first)>=0&&this._findOldCandidateIndex(e,n.second)>=0?0:-1:this._findOldCandidateIndex(e,n)}_intersectWithOtherCandidates(n,e,t,i,s){const{coordinateHelper:r}=s,a=e[n],o=[];for(let c=0;c<e.length;++c){if(c===n)continue;const l=e[c],d=a.constraint.intersect(l.constraint);if(d)for(const h of d.closestPoints(a.targetPoint))o.push([new ie(h,a,l,l.isDraped),this._squaredScreenDistance(t,h,r)])}return o.length>0&&(o.sort((c,l)=>c[1]-l[1]),o[0][1]<this._squaredPointProximityThreshold(s.pointer))?this._updateSnappingCandidate(o[0][0],i,e,s):this.options.constraintsActive&&(a instanceof et||a instanceof Ye||a instanceof Ee||a instanceof tt)?{snappedPoint:t,hints:[]}:this._updateSnappingCandidate(a,i,e,s)}_updateSnappingCandidate(n,e,t,i){this.doneSnapping(),this._currentMainCandidate=n,this._currentSnappedType=e;const s=this._currentMainCandidate.targetPoint,r=[];r.push(...n.hints);for(const a of t){if(n instanceof ie){if(a.constraint.equals(n.first.constraint)||a.constraint.equals(n.second.constraint))continue}else if(a.constraint.equals(n.constraint))continue;const o=a.constraint.closestTo(s);this._squaredScreenDistance(o,s,i.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(a.targetPoint=s,this._currentOtherActiveCandidates.push(a),r.push(...a.hints))}return{snappedPoint:s,hints:r}}_squaredPointProximityThreshold(n){return n==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(n,e,t){return this._squaredScreenDistance(n,e,t.coordinateHelper)<this._squaredPointProximityThreshold(t.pointer)}_squaredScreenDistance(n,e,t){return H(this._toScreen(n,t),this._toScreen(e,t))}_toScreen(n,e){return m(n,e.spatialReference,_,this.view)}_findOldCandidateIndex(n,e){let t=-1;for(let i=0;i<n.length;++i)if(e.constraint.equals(n[i].constraint)){t=i;break}return t}get test(){return{visualizationsActive:this.hasHandles(se),engines:this._engines}}};var F;p([f({constructOnly:!0})],b.prototype,"view",void 0),p([f()],b.prototype,"options",void 0),p([f({readOnly:!0})],b.prototype,"updating",null),p([f()],b.prototype,"snappingEnginesFactory",void 0),p([f()],b.prototype,"_engines",void 0),p([f()],b.prototype,"_squaredMouseProximityThreshold",null),p([f()],b.prototype,"_squaredTouchProximityThreshold",null),p([f()],b.prototype,"_squaredSatisfiesConstraintThreshold",null),b=p([q("esri.views.interactive.snapping.SnappingManager")],b),function(n){n[n.MAIN=0]="MAIN",n[n.SCENE=1]="SCENE"}(F||(F={}));const se="visualization-handle";function li(n){return n.scenePoint!=null}function ci({coordinateHelper:n,elevationInfo:e}){return n.hasZ()?_:e}export{O as I,Ye as a,Di as b,xe as c,b as j,Ai as l,we as n,Be as p,Ht as r,jt as u};
