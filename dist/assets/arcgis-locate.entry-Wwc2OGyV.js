import{aA as o,aB as s,aC as a,aD as n}from"./index-8ERthB3p.js";import{J as c,i as d}from"./index-f6afcedb-CZuD5wYN.js";import{r as h,c as r,a as l}from"./component-utils-858627d8-DRqmNtSu.js";import{o as g}from"./disconnected-e221dd46-DyoRKtII.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.29/esri/copyright.txt for details.
 * v4.29.10
 */const p="arcgis-locate{}",f=class{constructor(e){o(this,e),this.arcgisLocateReady=s(this,"arcgisLocateReady",7),this.locateSuccess=s(this,"locateSuccess",7),this.locateError=s(this,"locateError",7),this._watchHandles=[],this.referenceElement=void 0,this.error=void 0,this.geolocationOptions=void 0,this.goToLocationDisabled=!1,this.graphic=void 0,this.icon=void 0,this.popupDisabled=!1,this.scale=void 0,this.state=void 0,this.position="bottom-left",this.view=void 0,this.widget=void 0}referenceElementWatcher(e){h(this,e)}geolocationOptionsWatcher(e){e!==void 0&&this.widget&&(this.widget.geolocationOptions=e)}goToLocationDisabledWatcher(e){e!==void 0&&this.widget&&(this.widget.goToLocationEnabled=!e)}graphicWatcher(e){this.widget&&(this.widget.graphic=e)}iconWatcher(e){e!==void 0&&this.widget&&(this.widget.icon=e,this.widget.iconClass=e)}popupDisabledWatcher(e){e!==void 0&&this.widget&&(this.widget.popupEnabled=!e)}scaleWatcher(e){e!==void 0&&this.widget&&(this.widget.scale=e)}positionWatcher(e){e!==void 0&&this.widget&&this.view.ui.move(this.childElem,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e)}async cancelLocate(){var e;(e=this.widget)==null||e.cancelLocate()}async locate(){var e;return await((e=this.widget)==null?void 0:e.locate())}async componentDidLoad(){const e=this._createParams(),i=await c(e);this.widget=i,await this._addWatchers(),this._addContainer(),this.arcgisLocateReady.emit(),this._proxyEvents(),r(this)}disconnectedCallback(){g(this)}render(){return a("div",{ref:e=>this.childElem=e})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:e}=await d();l(this,[e(()=>{var i,t;return(t=(i=this.widget)==null?void 0:i.viewModel)==null?void 0:t.state},i=>this.state=i),e(()=>{var i,t;return(t=(i=this.widget)==null?void 0:i.viewModel)==null?void 0:t.error},i=>this.error=i)])}_createParams(){const e={};return this.geolocationOptions!==void 0&&(e.geolocationOptions=this.geolocationOptions),this.goToLocationDisabled!==void 0&&(e.goToLocationEnabled=!this.goToLocationDisabled),this.graphic!==void 0&&(e.graphic=this.graphic),this.icon!==void 0&&(e.icon=this.icon,e.iconClass=this.icon),this.popupDisabled!==void 0&&(e.popupEnabled=!this.popupDisabled),this.scale!==void 0&&(e.scale=this.scale),this.view&&(e.view=this.view),e}_proxyEvents(){var e,i;(e=this.widget)==null||e.on("locate",t=>this.locateSuccess.emit(t)),(i=this.widget)==null||i.on("locate-error",t=>this.locateError.emit(t))}get el(){return n(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],geolocationOptions:["geolocationOptionsWatcher"],goToLocationDisabled:["goToLocationDisabledWatcher"],graphic:["graphicWatcher"],icon:["iconWatcher"],popupDisabled:["popupDisabledWatcher"],scale:["scaleWatcher"],position:["positionWatcher"],view:["viewWatcher"]}}};f.style=p;export{f as arcgis_locate};
