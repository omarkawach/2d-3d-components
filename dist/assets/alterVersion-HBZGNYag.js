import{s as n,U as u}from"./index-8ERthB3p.js";import{f as g,n as v,s as w}from"./utils-1zmckiYC.js";import{r as m}from"./serverVersionUtils-BfJfWaCL.js";const i=new Map;async function V(s,r,a,c){i.has(s)||await m(i,s);const e=i.get(s);if(((e==null?void 0:e.serverVersion)??0)<=11.1)throw new n("alterVersion:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!r)throw new n("alterVersion:missing-guid","guid for version is missing");const o=g(s),h=a.toJSON(),f=v(o.query,{query:w({...h,f:"json"}),...c,authMode:"immediate",method:"post"});r.startsWith("{")&&(r=r.slice(1,-1));const p=`${o.path}/versions/${r}/alter`,{data:t}=await u(p,f);return!!t&&t.success}export{V as alterVersion,i as serverVersionCacheMap};
