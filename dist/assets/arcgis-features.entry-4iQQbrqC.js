import{aA as a,aB as n,aC as r,aD as l}from"./index-8ERthB3p.js";import{A as h,i as c}from"./index-f6afcedb-CZuD5wYN.js";import{r as o,c as d,a as i}from"./component-utils-858627d8-DRqmNtSu.js";import{o as u}from"./disconnected-e221dd46-DyoRKtII.js";/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.29/esri/copyright.txt for details.
 * v4.29.10
 */const g="arcgis-features{}",m=class{constructor(e){a(this,e),this.arcgisFeaturesReady=n(this,"arcgisFeaturesReady",7),this.featuresTriggerAction=n(this,"featuresTriggerAction",7),this._watchHandles=[],this.referenceElement=void 0,this.collapsed=!1,this.content=void 0,this.features=void 0,this.icon=void 0,this.promises=void 0,this.selectedFeature=void 0,this.selectedFeatureIndex=void 0,this.featuresTitle=void 0,this.visibleElementsActionBar=!0,this.visibleElementsCloseButton=!0,this.visibleElementsCollapseButton=!0,this.visibleElementsFeatureNavigation=!0,this.visibleElementsHeading=!0,this.visibleElementsSpinner=!0,this.position="bottom-left",this.view=void 0,this.widget=void 0}referenceElementWatcher(e){o(this,e)}contentWatcher(e){this.widget&&(this.widget.content=e)}featuresWatcher(e){this.widget&&(this.widget.features=e)}iconWatcher(e){this.widget&&(this.widget.icon=e)}featuresTitleWatcher(e){this.widget&&(this.widget.title=e)}visibleElementsActionBarWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,actionBar:e})}visibleElementsCloseButtonWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,closeButton:e})}visibleElementsCollapseButtonWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,collapseButton:e})}visibleElementsFeatureNavigationWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,featureNavigation:e})}visibleElementsHeadingWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,heading:e})}visibleElementsSpinnerWatcher(e){this.widget&&(this.widget.visibleElements={...this.widget.visibleElements,spinner:e})}positionWatcher(e){e!==void 0&&this.widget&&this.view.ui.move(this.childElem,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e)}async fetchFeatures(e,t){var s;return await((s=this.widget)==null?void 0:s.fetchFeatures(e,t))}async clear(){var e;(e=this.widget)==null||e.clear()}async close(){var e;(e=this.widget)==null||e.close()}async next(){var e;return(e=this.widget)==null?void 0:e.next()}async open(e){var t;(t=this.widget)==null||t.open(e)}async previous(){var e;return(e=this.widget)==null?void 0:e.previous()}async triggerAction(e){var t;(t=this.widget)==null||t.triggerAction(e)}async componentDidLoad(){const e=this._createParams(),t=await h(e);this.widget=t,await this._addWatchers(),this._proxyEvents(),this._addContainer(),this.arcgisFeaturesReady.emit(),d(this)}disconnectedCallback(){u(this)}render(){return r("div",{ref:e=>this.childElem=e})}_addContainer(){this.widget.container=this.childElem}async _addWatchers(){const{watch:e}=await c();i(this,e(()=>this.widget.collapsed,t=>this.collapsed=t,{initial:!0})),i(this,e(()=>this.widget.promises,t=>this.promises=t,{initial:!0})),i(this,e(()=>this.widget.selectedFeature,t=>this.selectedFeature=t,{initial:!0})),i(this,e(()=>this.widget.selectedFeatureIndex,t=>this.selectedFeatureIndex=t,{initial:!0}))}_createParams(){const e={};return e.visibleElements={actionBar:this.visibleElementsActionBar,closeButton:this.visibleElementsCloseButton,collapseButton:this.visibleElementsCollapseButton,featureNavigation:this.visibleElementsFeatureNavigation,heading:this.visibleElementsHeading,spinner:this.visibleElementsSpinner},this.icon&&(e.icon=this.icon),this.view&&(e.view=this.view),this.content&&(e.content=this.content),this.features&&(e.features=this.features),this.featuresTitle&&(e.title=this.featuresTitle),e}_proxyEvents(){this.widget.on("trigger-action",e=>this.featuresTriggerAction.emit(e))}get el(){return l(this)}static get watchers(){return{referenceElement:["referenceElementWatcher"],content:["contentWatcher"],features:["featuresWatcher"],icon:["iconWatcher"],featuresTitle:["featuresTitleWatcher"],visibleElementsActionBar:["visibleElementsActionBarWatcher"],visibleElementsCloseButton:["visibleElementsCloseButtonWatcher"],visibleElementsCollapseButton:["visibleElementsCollapseButtonWatcher"],visibleElementsFeatureNavigation:["visibleElementsFeatureNavigationWatcher"],visibleElementsHeading:["visibleElementsHeadingWatcher"],visibleElementsSpinner:["visibleElementsSpinnerWatcher"],position:["positionWatcher"],view:["viewWatcher"]}}};m.style=g;export{m as arcgis_features};
