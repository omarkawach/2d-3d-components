function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/calcite-button-BGRBzuhy.js","assets/button-Csva0FHl.js","assets/jsxFactory-BxQYPm-b.js","assets/index-8ERthB3p.js","assets/index-CzRN3C0i.css","assets/form-DjQ2sEGP.js","assets/dom-BvFmd0Ey.js","assets/guid-Cgw_FQNn.js","assets/interactive-juHwuDyB.js","assets/label2-D3Hkhas-.js","assets/component-CiBiWYk6.js","assets/loadable-C9pgOBpc.js","assets/locale-czPJjPyG.js","assets/key-wu7cp3Vu.js","assets/observers-hu61Hn6M.js","assets/t9n-GCZDzKCw.js","assets/icon-DyzVx5Y-.js","assets/loader-DeANvmkY.js","assets/calcite-dropdown-BrzfD5-7.js","assets/floating-ui-azNa5k60.js","assets/debounce-Bd3Yf8RP.js","assets/openCloseComponent-C40eKxzi.js","assets/calcite-dropdown-group-D_IOxKPm.js","assets/resources3-Bp-OEmoF.js","assets/calcite-dropdown-item-5qk9TrDm.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{o as d,y as O,X as ze,bO as qt,aJ as j,ke as We,oA as vt,_ as $e,p$ as Jt,s as Xt,o4 as Gt,cr as Ke,gl as mt,b3 as Ne,cu as Zt,kp as se,P as Qt,q0 as eo,q1 as to}from"./index-8ERthB3p.js";import{e as Et,O as Ze,r as oo,n as g,u as no,y as ro,m as io,L as Ae,i as he,x as Me,v as ao}from"./jsxFactory-BxQYPm-b.js";import{u as so}from"./ShadowCastVisualizeTechniqueConfiguration-DqJ__9Ii.js";import{e as G}from"./globalCss-DfZw-NIf.js";import{t as Ye}from"./accessibleHandler-DsewpcQ5.js";let ye=class extends qt{constructor(){super(...arguments),this.state="ready",this.value=new Date}};d([O()],ye.prototype,"state",void 0),d([O()],ye.prototype,"value",void 0),ye=d([ze("esri.widgets.support.DateTimeElementViewModel")],ye);const lo=ye;let qe=class extends lo{constructor(e){super(e)}};qe=d([ze("esri.widgets.support.DatePickerViewModel")],qe);const $t=qe,co={hour:"2-digit",minute:"2-digit",timeZone:"UTC"},uo={hour:"numeric",timeZone:"UTC"};function Sn(e,t){let o;if(t==="tick"){const r=Math.round(vt(e,"minutes","hours"));o=new Date(vt(r,"hours","milliseconds"))}else o=new Date(6e4*e);let n=j(o,co);return e!==0&&n==="00:00"&&(n="24:00"),t==="tick"&&n.includes(" ")&&(n=j(o,uo),n=n.replace(":00","")),n}function In(e,t,o,n){if(t==null||o==null)return null;const r=so.getTimes(e,t,o),a=r.sunrise,l=r.sunset,i=We(e,n,"hours"),s=We(a,n,"hours"),u=We(l,n,"hours");if(i.getUTCDate()!==s.getUTCDate()||i.getUTCDate()!==u.getUTCDate()){const c=i.getTime()-s.getTime()>0?1:-1;a.setUTCDate(a.getUTCDate()+c),l.setUTCDate(l.getUTCDate()+c)}return{sunrise:a,sunset:l}}function fo(e){return[{utcOffset:-12,short:"UTC-12",long:e.timezoneDateline},{utcOffset:-11,short:"UTC-11",long:e.timezoneSamoa},{utcOffset:-10,short:e.timezoneHAST,long:e.timezoneHawaii},{utcOffset:-9,short:e.timezoneAKST,long:e.timezoneAlaska},{utcOffset:-8,short:e.timezonePST,long:e.timezoneBaja},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneMountain},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneLaPaz},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneArizona},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneSaskatchewan},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralAmerica},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralTime},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneMexico},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneEasternUS},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneLima},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneIndiana},{utcOffset:-4,short:null,long:e.timezoneAtlantic},{utcOffset:-4,short:null,long:e.timezoneCuiaba},{utcOffset:-4,short:null,long:e.timezoneSantiago},{utcOffset:-4,short:null,long:e.timezoneManaus},{utcOffset:-4,short:null,long:e.timezoneAsuncion},{utcOffset:-3,short:null,long:e.timezoneBrasilia},{utcOffset:-3,short:null,long:e.timezoneGreenland},{utcOffset:-3,short:null,long:e.timezoneMontevideo},{utcOffset:-3,short:null,long:e.timezoneCayenne},{utcOffset:-3,short:null,long:e.timezoneBuenosAires},{utcOffset:-2,short:null,long:e.timezoneMidAtlantic},{utcOffset:-1,short:null,long:e.timezoneAzores},{utcOffset:-1,short:null,long:e.timezoneCaboVerde},{utcOffset:0,short:null,long:e.timezoneDublin},{utcOffset:0,short:null,long:e.timezoneReykjavik},{utcOffset:0,short:null,long:e.timezoneCasablanca},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBelgrade},{utcOffset:1,short:e.timezoneCET,long:e.timezoneSarajevo},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBrussels},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWCAfrica},{utcOffset:1,short:e.timezoneCET,long:e.timezoneAmsterdam},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWindhoek},{utcOffset:2,short:e.timezoneEET,long:e.timezoneMinsk},{utcOffset:2,short:e.timezoneEET,long:e.timezoneCairo},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHelsinki},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAthens},{utcOffset:2,short:e.timezoneEET,long:e.timezoneJerusalem},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAmman},{utcOffset:2,short:e.timezoneEET,long:e.timezoneBeirut},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHarare},{utcOffset:2,short:e.timezoneEET,long:e.timezoneDamascus},{utcOffset:2,short:e.timezoneEET,long:e.timezoneIstanbul},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKuwait},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneBaghdad},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneNairobi},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKaliningrad},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMoscow},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMuscat},{utcOffset:4,short:e.timezoneGST,long:e.timezoneBaku},{utcOffset:4,short:e.timezoneGST,long:e.timezoneYerevan},{utcOffset:4,short:e.timezoneGST,long:e.timezoneTbilisi},{utcOffset:4,short:e.timezoneGST,long:e.timezonePortLouis},{utcOffset:5,short:null,long:e.timezoneTashkent},{utcOffset:5,short:null,long:e.timezoneIslamabad},{utcOffset:6,short:null,long:e.timezoneEkaterinburg},{utcOffset:6,short:null,long:e.timezoneAstana},{utcOffset:6,short:null,long:e.timezoneDhaka},{utcOffset:7,short:e.timezoneICT,long:e.timezoneNovosibirsk},{utcOffset:7,short:e.timezoneICT,long:e.timezoneBangkok},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneKrasnoyarsk},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneBeijing},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneSingapore},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneTaipei},{utcOffset:8,short:e.timezoneCCT,long:e.timezonePerth},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneUlaanbaatar},{utcOffset:9,short:e.timezoneJST,long:e.timezoneIrkutsk},{utcOffset:9,short:e.timezoneJST,long:e.timezoneSeoul},{utcOffset:9,short:e.timezoneJST,long:e.timezoneOsaka},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneYakutsk},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneCanberra},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneBrisbane},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneHobart},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneGuam},{utcOffset:11,short:null,long:e.timezoneVladivostok},{utcOffset:11,short:null,long:e.timezoneSolomon},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneMagadan},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneFiji},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneAuckland},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneNukualofa}].map(({utcOffset:t,short:o,long:n})=>{const r=t>0?`UTC+${t}`:t<0?`UTC${t}`:"GMT";return o?{utcOffset:t,short:o,shortWithUTC:`${r} (${o})`,long:n}:{utcOffset:t,short:r,shortWithUTC:r,long:n}})}const Se="esri-timezone-picker",ve={base:Se,trigger:`${Se}__trigger`,itemTitle:`${Se}__item-title`,itemDescription:`${Se}__item_description`};let Y=class extends Ze{constructor(e,t){super(e,t),this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{var o;this.open=!0,(o=this.onOpen)==null||o.call(this)},this._onClose=()=>{var o;this.open=!1,(o=this.onClose)==null||o.call(this)},this._killEvent=o=>(o.stopPropagation(),!0),this._onChange=o=>{var l,i,s;const n=o.target,r=(l=n.selectedItems)==null?void 0:l[0].getAttribute("data-id"),a=(i=gt(this._gmtOffsets,r))==null?void 0:i.utcOffset;a&&(this._selectedId=r,(s=this.onChange)==null||s.call(this,a))}}loadDependencies(){return oo({button:()=>$e(()=>import("./calcite-button-BGRBzuhy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])),dropdown:()=>$e(()=>import("./calcite-dropdown-BrzfD5-7.js"),__vite__mapDeps([18,2,3,4,6,7,19,20,8,13,11,14,21])),"dropdown-group":()=>$e(()=>import("./calcite-dropdown-group-D_IOxKPm.js"),__vite__mapDeps([22,2,3,4,14,23])),"dropdown-item":()=>$e(()=>import("./calcite-dropdown-item-5qk9TrDm.js"),__vite__mapDeps([24,2,3,4,6,7,23,11,10,8,16,14]))})}render(){const e=this._messages;if(!e)return g("div",{class:ve.base,key:"empty"});const t=this._selectedItem,o=Je(t);return g("div",{class:ve.base,key:"container",onpointerdown:this._killEvent},g("calcite-dropdown",{open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},g("calcite-button",{appearance:"transparent",class:ve.trigger,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:e.chooseTimezone},(t==null?void 0:t.short)??""),g("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map(n=>{const r=Je(n);return g("calcite-dropdown-item",{"data-id":r,key:r,selected:o===r},g("div",{class:ve.itemTitle,key:"title"},n.shortWithUTC),g("div",{class:ve.itemDescription,key:"description"},n.long))}))))}get _gmtOffsets(){const e=this._messages;return e?fo(e):[]}get _selectedItem(){const e=this._gmtOffsets,t=this.value,o=gt(e,this._selectedId);return(o==null?void 0:o.utcOffset)===t?o:po(e,t)}};function gt(e,t){return e.find(o=>Je(o)===t)}function po(e,t){return e.find(o=>o.utcOffset===t)}function Je(e){return e?`${e.utcOffset}-${e.long}`:void 0}d([O()],Y.prototype,"value",void 0),d([O()],Y.prototype,"onChange",void 0),d([O()],Y.prototype,"open",void 0),d([O()],Y.prototype,"onOpen",void 0),d([O()],Y.prototype,"onClose",void 0),d([O(),Et("esri/widgets/support/t9n/timezone")],Y.prototype,"_messages",void 0),d([O()],Y.prototype,"_gmtOffsets",null),d([O()],Y.prototype,"_selectedItem",null),d([O()],Y.prototype,"_selectedId",void 0),Y=d([ze("esri.widgets.support.TimezonePicker")],Y);function ho(e,t){const o=Jt(t),n=Date.now(),r=o.formatToParts(n),a=new Set;r.filter(({type:u})=>u==="literal").forEach(({value:u})=>a.add(u));let l=0;const i={};for(;r.length>0;){const{type:u,value:c}=r.shift();for(let h=0;h<c.length;h++,l++){const y=e.charAt(l);if(a.has(y)){l++;break}if(u==="literal")break;i[u]||(i[u]=[]),i[u].push(y)}}const s={};try{s.day=Ve(i.day.join("")),s.month=Ve(i.month.join("")),s.year=Ve((i.year||i.relatedYear).join(""))}catch{throw yt(t)}if(isNaN(s.day)||isNaN(s.month)||isNaN(s.year))throw yt(t);return s}function Ve(e){const t=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let o=0;o<10;o++)e=e.replace(t[o],o.toString());return Number(e)}function yt(e){return new Xt(`could not parse date input, expecting the following format: ${j(Date.now(),e)}`)}const me={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":7,"zh-mo":7,"zh-tw":7},vo="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function At(e){if(e=e.toLowerCase(),me[e])return me[e];if(vo)try{const o=new Intl.Locale(e).weekInfo.firstDay;return me[e]=o,o}catch{}const t=Gt(e);return me[t]?me[t]:7}function mo(e,t){return(t+7-At(e))%7}var I="top",F="bottom",H="right",N="left",Qe="auto",xe=[I,F,H,N],le="start",_e="end",go="clippingParents",Mt="viewport",ge="popper",yo="reference",Ot=xe.reduce(function(e,t){return e.concat([t+"-"+le,t+"-"+_e])},[]),St=[].concat(xe,[Qe]).reduce(function(e,t){return e.concat([t,t+"-"+le,t+"-"+_e])},[]),Oo="beforeRead",wo="read",_o="afterRead",bo="beforeMain",zo="main",xo="afterMain",ko="beforeWrite",Do="write",To="afterWrite",Co=[Oo,wo,_o,bo,zo,xo,ko,Do,To];function q(e){return e?(e.nodeName||"").toLowerCase():null}function R(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ie(e){var t=R(e).Element;return e instanceof t||e instanceof Element}function L(e){var t=R(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function et(e){if(typeof ShadowRoot>"u")return!1;var t=R(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Po(e){var t=e.state;Object.keys(t.elements).forEach(function(o){var n=t.styles[o]||{},r=t.attributes[o]||{},a=t.elements[o];!L(a)||!q(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(l){var i=r[l];i===!1?a.removeAttribute(l):a.setAttribute(l,i===!0?"":i)}))})}function Eo(e){var t=e.state,o={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,o.popper),t.styles=o,t.elements.arrow&&Object.assign(t.elements.arrow.style,o.arrow),function(){Object.keys(t.elements).forEach(function(n){var r=t.elements[n],a=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:o[n]),i=l.reduce(function(s,u){return s[u]="",s},{});!L(r)||!q(r)||(Object.assign(r.style,i),Object.keys(a).forEach(function(s){r.removeAttribute(s)}))})}}const $o={name:"applyStyles",enabled:!0,phase:"write",fn:Po,effect:Eo,requires:["computeStyles"]};function K(e){return e.split("-")[0]}var re=Math.max,je=Math.min,ce=Math.round;function Xe(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function It(){return!/^((?!chrome|android).)*safari/i.test(Xe())}function ue(e,t,o){t===void 0&&(t=!1),o===void 0&&(o=!1);var n=e.getBoundingClientRect(),r=1,a=1;t&&L(e)&&(r=e.offsetWidth>0&&ce(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ce(n.height)/e.offsetHeight||1);var l=ie(e)?R(e):window,i=l.visualViewport,s=!It()&&o,u=(n.left+(s&&i?i.offsetLeft:0))/r,c=(n.top+(s&&i?i.offsetTop:0))/a,h=n.width/r,y=n.height/a;return{width:h,height:y,top:c,right:u+h,bottom:c+y,left:u,x:u,y:c}}function tt(e){var t=ue(e),o=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-o)<=1&&(o=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:o,height:n}}function Nt(e,t){var o=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(o&&et(o)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function J(e){return R(e).getComputedStyle(e)}function Ao(e){return["table","td","th"].indexOf(q(e))>=0}function Z(e){return((ie(e)?e.ownerDocument:e.document)||window.document).documentElement}function Re(e){return q(e)==="html"?e:e.assignedSlot||e.parentNode||(et(e)?e.host:null)||Z(e)}function wt(e){return!L(e)||J(e).position==="fixed"?null:e.offsetParent}function Mo(e){var t=/firefox/i.test(Xe()),o=/Trident/i.test(Xe());if(o&&L(e)){var n=J(e);if(n.position==="fixed")return null}var r=Re(e);for(et(r)&&(r=r.host);L(r)&&["html","body"].indexOf(q(r))<0;){var a=J(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function ke(e){for(var t=R(e),o=wt(e);o&&Ao(o)&&J(o).position==="static";)o=wt(o);return o&&(q(o)==="html"||q(o)==="body"&&J(o).position==="static")?t:o||Mo(e)||t}function ot(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Oe(e,t,o){return re(e,je(t,o))}function So(e,t,o){var n=Oe(e,t,o);return n>o?o:n}function Bt(){return{top:0,right:0,bottom:0,left:0}}function jt(e){return Object.assign({},Bt(),e)}function Rt(e,t){return t.reduce(function(o,n){return o[n]=e,o},{})}var Io=function(t,o){return t=typeof t=="function"?t(Object.assign({},o.rects,{placement:o.placement})):t,jt(typeof t!="number"?t:Rt(t,xe))};function No(e){var t,o=e.state,n=e.name,r=e.options,a=o.elements.arrow,l=o.modifiersData.popperOffsets,i=K(o.placement),s=ot(i),u=[N,H].indexOf(i)>=0,c=u?"height":"width";if(!(!a||!l)){var h=Io(r.padding,o),y=tt(a),f=s==="y"?I:N,z=s==="y"?F:H,m=o.rects.reference[c]+o.rects.reference[s]-l[s]-o.rects.popper[c],v=l[s]-o.rects.reference[s],b=ke(a),D=b?s==="y"?b.clientHeight||0:b.clientWidth||0:0,T=m/2-v/2,p=h[f],w=D-y[c]-h[z],_=D/2-y[c]/2+T,k=Oe(p,_,w),A=s;o.modifiersData[n]=(t={},t[A]=k,t.centerOffset=k-_,t)}}function Bo(e){var t=e.state,o=e.options,n=o.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Nt(t.elements.popper,r)&&(t.elements.arrow=r))}const jo={name:"arrow",enabled:!0,phase:"main",fn:No,effect:Bo,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fe(e){return e.split("-")[1]}var Ro={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Lo(e,t){var o=e.x,n=e.y,r=t.devicePixelRatio||1;return{x:ce(o*r)/r||0,y:ce(n*r)/r||0}}function _t(e){var t,o=e.popper,n=e.popperRect,r=e.placement,a=e.variation,l=e.offsets,i=e.position,s=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,y=l.x,f=y===void 0?0:y,z=l.y,m=z===void 0?0:z,v=typeof c=="function"?c({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var b=l.hasOwnProperty("x"),D=l.hasOwnProperty("y"),T=N,p=I,w=window;if(u){var _=ke(o),k="clientHeight",A="clientWidth";if(_===R(o)&&(_=Z(o),J(_).position!=="static"&&i==="absolute"&&(k="scrollHeight",A="scrollWidth")),_=_,r===I||(r===N||r===H)&&a===_e){p=F;var $=h&&_===w&&w.visualViewport?w.visualViewport.height:_[k];m-=$-n.height,m*=s?1:-1}if(r===N||(r===I||r===F)&&a===_e){T=H;var P=h&&_===w&&w.visualViewport?w.visualViewport.width:_[A];f-=P-n.width,f*=s?1:-1}}var M=Object.assign({position:i},u&&Ro),U=c===!0?Lo({x:f,y:m},R(o)):{x:f,y:m};if(f=U.x,m=U.y,s){var S;return Object.assign({},M,(S={},S[p]=D?"0":"",S[T]=b?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",S))}return Object.assign({},M,(t={},t[p]=D?m+"px":"",t[T]=b?f+"px":"",t.transform="",t))}function Fo(e){var t=e.state,o=e.options,n=o.gpuAcceleration,r=n===void 0?!0:n,a=o.adaptive,l=a===void 0?!0:a,i=o.roundOffsets,s=i===void 0?!0:i,u={placement:K(t.placement),variation:fe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,_t(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,_t(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ho={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fo,data:{}};var Ie={passive:!0};function Uo(e){var t=e.state,o=e.instance,n=e.options,r=n.scroll,a=r===void 0?!0:r,l=n.resize,i=l===void 0?!0:l,s=R(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",o.update,Ie)}),i&&s.addEventListener("resize",o.update,Ie),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",o.update,Ie)}),i&&s.removeEventListener("resize",o.update,Ie)}}const Wo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Uo,data:{}};var Yo={left:"right",right:"left",bottom:"top",top:"bottom"};function Be(e){return e.replace(/left|right|bottom|top/g,function(t){return Yo[t]})}var Vo={start:"end",end:"start"};function bt(e){return e.replace(/start|end/g,function(t){return Vo[t]})}function nt(e){var t=R(e),o=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:o,scrollTop:n}}function rt(e){return ue(Z(e)).left+nt(e).scrollLeft}function Ko(e,t){var o=R(e),n=Z(e),r=o.visualViewport,a=n.clientWidth,l=n.clientHeight,i=0,s=0;if(r){a=r.width,l=r.height;var u=It();(u||!u&&t==="fixed")&&(i=r.offsetLeft,s=r.offsetTop)}return{width:a,height:l,x:i+rt(e),y:s}}function qo(e){var t,o=Z(e),n=nt(e),r=(t=e.ownerDocument)==null?void 0:t.body,a=re(o.scrollWidth,o.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=re(o.scrollHeight,o.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),i=-n.scrollLeft+rt(e),s=-n.scrollTop;return J(r||o).direction==="rtl"&&(i+=re(o.clientWidth,r?r.clientWidth:0)-a),{width:a,height:l,x:i,y:s}}function it(e){var t=J(e),o=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(o+r+n)}function Lt(e){return["html","body","#document"].indexOf(q(e))>=0?e.ownerDocument.body:L(e)&&it(e)?e:Lt(Re(e))}function we(e,t){var o;t===void 0&&(t=[]);var n=Lt(e),r=n===((o=e.ownerDocument)==null?void 0:o.body),a=R(n),l=r?[a].concat(a.visualViewport||[],it(n)?n:[]):n,i=t.concat(l);return r?i:i.concat(we(Re(l)))}function Ge(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Jo(e,t){var o=ue(e,!1,t==="fixed");return o.top=o.top+e.clientTop,o.left=o.left+e.clientLeft,o.bottom=o.top+e.clientHeight,o.right=o.left+e.clientWidth,o.width=e.clientWidth,o.height=e.clientHeight,o.x=o.left,o.y=o.top,o}function zt(e,t,o){return t===Mt?Ge(Ko(e,o)):ie(t)?Jo(t,o):Ge(qo(Z(e)))}function Xo(e){var t=we(Re(e)),o=["absolute","fixed"].indexOf(J(e).position)>=0,n=o&&L(e)?ke(e):e;return ie(n)?t.filter(function(r){return ie(r)&&Nt(r,n)&&q(r)!=="body"}):[]}function Go(e,t,o,n){var r=t==="clippingParents"?Xo(e):[].concat(t),a=[].concat(r,[o]),l=a[0],i=a.reduce(function(s,u){var c=zt(e,u,n);return s.top=re(c.top,s.top),s.right=je(c.right,s.right),s.bottom=je(c.bottom,s.bottom),s.left=re(c.left,s.left),s},zt(e,l,n));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Ft(e){var t=e.reference,o=e.element,n=e.placement,r=n?K(n):null,a=n?fe(n):null,l=t.x+t.width/2-o.width/2,i=t.y+t.height/2-o.height/2,s;switch(r){case I:s={x:l,y:t.y-o.height};break;case F:s={x:l,y:t.y+t.height};break;case H:s={x:t.x+t.width,y:i};break;case N:s={x:t.x-o.width,y:i};break;default:s={x:t.x,y:t.y}}var u=r?ot(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case le:s[u]=s[u]-(t[c]/2-o[c]/2);break;case _e:s[u]=s[u]+(t[c]/2-o[c]/2);break}}return s}function be(e,t){t===void 0&&(t={});var o=t,n=o.placement,r=n===void 0?e.placement:n,a=o.strategy,l=a===void 0?e.strategy:a,i=o.boundary,s=i===void 0?go:i,u=o.rootBoundary,c=u===void 0?Mt:u,h=o.elementContext,y=h===void 0?ge:h,f=o.altBoundary,z=f===void 0?!1:f,m=o.padding,v=m===void 0?0:m,b=jt(typeof v!="number"?v:Rt(v,xe)),D=y===ge?yo:ge,T=e.rects.popper,p=e.elements[z?D:y],w=Go(ie(p)?p:p.contextElement||Z(e.elements.popper),s,c,l),_=ue(e.elements.reference),k=Ft({reference:_,element:T,strategy:"absolute",placement:r}),A=Ge(Object.assign({},T,k)),$=y===ge?A:_,P={top:w.top-$.top+b.top,bottom:$.bottom-w.bottom+b.bottom,left:w.left-$.left+b.left,right:$.right-w.right+b.right},M=e.modifiersData.offset;if(y===ge&&M){var U=M[r];Object.keys(P).forEach(function(S){var Q=[H,F].indexOf(S)>=0?1:-1,ee=[I,F].indexOf(S)>=0?"y":"x";P[S]+=U[ee]*Q})}return P}function Zo(e,t){t===void 0&&(t={});var o=t,n=o.placement,r=o.boundary,a=o.rootBoundary,l=o.padding,i=o.flipVariations,s=o.allowedAutoPlacements,u=s===void 0?St:s,c=fe(n),h=c?i?Ot:Ot.filter(function(z){return fe(z)===c}):xe,y=h.filter(function(z){return u.indexOf(z)>=0});y.length===0&&(y=h);var f=y.reduce(function(z,m){return z[m]=be(e,{placement:m,boundary:r,rootBoundary:a,padding:l})[K(m)],z},{});return Object.keys(f).sort(function(z,m){return f[z]-f[m]})}function Qo(e){if(K(e)===Qe)return[];var t=Be(e);return[bt(e),t,bt(t)]}function en(e){var t=e.state,o=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=o.mainAxis,a=r===void 0?!0:r,l=o.altAxis,i=l===void 0?!0:l,s=o.fallbackPlacements,u=o.padding,c=o.boundary,h=o.rootBoundary,y=o.altBoundary,f=o.flipVariations,z=f===void 0?!0:f,m=o.allowedAutoPlacements,v=t.options.placement,b=K(v),D=b===v,T=s||(D||!z?[Be(v)]:Qo(v)),p=[v].concat(T).reduce(function(ae,X){return ae.concat(K(X)===Qe?Zo(t,{placement:X,boundary:c,rootBoundary:h,padding:u,flipVariations:z,allowedAutoPlacements:m}):X)},[]),w=t.rects.reference,_=t.rects.popper,k=new Map,A=!0,$=p[0],P=0;P<p.length;P++){var M=p[P],U=K(M),S=fe(M)===le,Q=[I,F].indexOf(U)>=0,ee=Q?"width":"height",B=be(t,{placement:M,boundary:c,rootBoundary:h,altBoundary:y,padding:u}),W=Q?S?H:N:S?F:I;w[ee]>_[ee]&&(W=Be(W));var De=Be(W),te=[];if(a&&te.push(B[U]<=0),i&&te.push(B[W]<=0,B[De]<=0),te.every(function(ae){return ae})){$=M,A=!1;break}k.set(M,te)}if(A)for(var Te=z?3:1,Le=function(X){var pe=p.find(function(Pe){var oe=k.get(Pe);if(oe)return oe.slice(0,X).every(function(Fe){return Fe})});if(pe)return $=pe,"break"},de=Te;de>0;de--){var Ce=Le(de);if(Ce==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}const tn={name:"flip",enabled:!0,phase:"main",fn:en,requiresIfExists:["offset"],data:{_skip:!1}};function xt(e,t,o){return o===void 0&&(o={x:0,y:0}),{top:e.top-t.height-o.y,right:e.right-t.width+o.x,bottom:e.bottom-t.height+o.y,left:e.left-t.width-o.x}}function kt(e){return[I,H,F,N].some(function(t){return e[t]>=0})}function on(e){var t=e.state,o=e.name,n=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,l=be(t,{elementContext:"reference"}),i=be(t,{altBoundary:!0}),s=xt(l,n),u=xt(i,r,a),c=kt(s),h=kt(u);t.modifiersData[o]={referenceClippingOffsets:s,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const nn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:on};function rn(e,t,o){var n=K(e),r=[N,I].indexOf(n)>=0?-1:1,a=typeof o=="function"?o(Object.assign({},t,{placement:e})):o,l=a[0],i=a[1];return l=l||0,i=(i||0)*r,[N,H].indexOf(n)>=0?{x:i,y:l}:{x:l,y:i}}function an(e){var t=e.state,o=e.options,n=e.name,r=o.offset,a=r===void 0?[0,0]:r,l=St.reduce(function(c,h){return c[h]=rn(h,t.rects,a),c},{}),i=l[t.placement],s=i.x,u=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=l}const sn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:an};function ln(e){var t=e.state,o=e.name;t.modifiersData[o]=Ft({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const cn={name:"popperOffsets",enabled:!0,phase:"read",fn:ln,data:{}};function un(e){return e==="x"?"y":"x"}function fn(e){var t=e.state,o=e.options,n=e.name,r=o.mainAxis,a=r===void 0?!0:r,l=o.altAxis,i=l===void 0?!1:l,s=o.boundary,u=o.rootBoundary,c=o.altBoundary,h=o.padding,y=o.tether,f=y===void 0?!0:y,z=o.tetherOffset,m=z===void 0?0:z,v=be(t,{boundary:s,rootBoundary:u,padding:h,altBoundary:c}),b=K(t.placement),D=fe(t.placement),T=!D,p=ot(b),w=un(p),_=t.modifiersData.popperOffsets,k=t.rects.reference,A=t.rects.popper,$=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,P=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),M=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,U={x:0,y:0};if(_){if(a){var S,Q=p==="y"?I:N,ee=p==="y"?F:H,B=p==="y"?"height":"width",W=_[p],De=W+v[Q],te=W-v[ee],Te=f?-A[B]/2:0,Le=D===le?k[B]:A[B],de=D===le?-A[B]:-k[B],Ce=t.elements.arrow,ae=f&&Ce?tt(Ce):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Bt(),pe=X[Q],Pe=X[ee],oe=Oe(0,k[B],ae[B]),Fe=T?k[B]/2-Te-oe-pe-P.mainAxis:Le-oe-pe-P.mainAxis,Ht=T?-k[B]/2+Te+oe+Pe+P.mainAxis:de+oe+Pe+P.mainAxis,He=t.elements.arrow&&ke(t.elements.arrow),Ut=He?p==="y"?He.clientTop||0:He.clientLeft||0:0,at=(S=M==null?void 0:M[p])!=null?S:0,Wt=W+Fe-at-Ut,Yt=W+Ht-at,st=Oe(f?je(De,Wt):De,W,f?re(te,Yt):te);_[p]=st,U[p]=st-W}if(i){var lt,Vt=p==="x"?I:N,Kt=p==="x"?F:H,ne=_[w],Ee=w==="y"?"height":"width",ct=ne+v[Vt],ut=ne-v[Kt],Ue=[I,N].indexOf(b)!==-1,ft=(lt=M==null?void 0:M[w])!=null?lt:0,dt=Ue?ct:ne-k[Ee]-A[Ee]-ft+P.altAxis,pt=Ue?ne+k[Ee]+A[Ee]-ft-P.altAxis:ut,ht=f&&Ue?So(dt,ne,pt):Oe(f?dt:ct,ne,f?pt:ut);_[w]=ht,U[w]=ht-ne}t.modifiersData[n]=U}}const dn={name:"preventOverflow",enabled:!0,phase:"main",fn,requiresIfExists:["offset"]};function pn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hn(e){return e===R(e)||!L(e)?nt(e):pn(e)}function vn(e){var t=e.getBoundingClientRect(),o=ce(t.width)/e.offsetWidth||1,n=ce(t.height)/e.offsetHeight||1;return o!==1||n!==1}function mn(e,t,o){o===void 0&&(o=!1);var n=L(t),r=L(t)&&vn(t),a=Z(t),l=ue(e,r,o),i={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(n||!n&&!o)&&((q(t)!=="body"||it(a))&&(i=hn(t)),L(t)?(s=ue(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):a&&(s.x=rt(a))),{x:l.left+i.scrollLeft-s.x,y:l.top+i.scrollTop-s.y,width:l.width,height:l.height}}function gn(e){var t=new Map,o=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function r(a){o.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(i){if(!o.has(i)){var s=t.get(i);s&&r(s)}}),n.push(a)}return e.forEach(function(a){o.has(a.name)||r(a)}),n}function yn(e){var t=gn(e);return Co.reduce(function(o,n){return o.concat(t.filter(function(r){return r.phase===n}))},[])}function On(e){var t;return function(){return t||(t=new Promise(function(o){Promise.resolve().then(function(){t=void 0,o(e())})})),t}}function wn(e){var t=e.reduce(function(o,n){var r=o[n.name];return o[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,o},{});return Object.keys(t).map(function(o){return t[o]})}var Dt={placement:"bottom",modifiers:[],strategy:"absolute"};function Tt(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function _n(e){e===void 0&&(e={});var t=e,o=t.defaultModifiers,n=o===void 0?[]:o,r=t.defaultOptions,a=r===void 0?Dt:r;return function(i,s,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Dt,a),modifiersData:{},elements:{reference:i,popper:s},attributes:{},styles:{}},h=[],y=!1,f={state:c,setOptions:function(b){var D=typeof b=="function"?b(c.options):b;m(),c.options=Object.assign({},a,c.options,D),c.scrollParents={reference:ie(i)?we(i):i.contextElement?we(i.contextElement):[],popper:we(s)};var T=yn(wn([].concat(n,c.options.modifiers)));return c.orderedModifiers=T.filter(function(p){return p.enabled}),z(),f.update()},forceUpdate:function(){if(!y){var b=c.elements,D=b.reference,T=b.popper;if(Tt(D,T)){c.rects={reference:mn(D,ke(T),c.options.strategy==="fixed"),popper:tt(T)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(P){return c.modifiersData[P.name]=Object.assign({},P.data)});for(var p=0;p<c.orderedModifiers.length;p++){if(c.reset===!0){c.reset=!1,p=-1;continue}var w=c.orderedModifiers[p],_=w.fn,k=w.options,A=k===void 0?{}:k,$=w.name;typeof _=="function"&&(c=_({state:c,options:A,name:$,instance:f})||c)}}}},update:On(function(){return new Promise(function(v){f.forceUpdate(),v(c)})}),destroy:function(){m(),y=!0}};if(!Tt(i,s))return f;f.setOptions(u).then(function(v){!y&&u.onFirstUpdate&&u.onFirstUpdate(v)});function z(){c.orderedModifiers.forEach(function(v){var b=v.name,D=v.options,T=D===void 0?{}:D,p=v.effect;if(typeof p=="function"){var w=p({state:c,name:b,instance:f,options:T}),_=function(){};h.push(w||_)}})}function m(){h.forEach(function(v){return v()}),h=[]}return f}}var bn=[Wo,cn,Ho,$o,sn,tn,dn,jo,nn],zn=_n({defaultModifiers:bn});const xn=new Set(["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"]),Ct="esri-popover",Pt={base:Ct,open:`${Ct}--open`},kn={position:"fixed","z-index":"1000"};let V=class extends Ze{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=o=>{this._rootNode=o},this._afterContentCreate=o=>{this._contentNode=o},this._updatePosition=()=>{this._popper!=null&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([Ke(()=>[this.open,this.anchorElement],()=>this._buildPopper(),mt),Ke(()=>[this.placement,this.offset],()=>this._setPopperOptions(),mt)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),this._rootNode!=null&&(no(this._rootNode),this._rootNode=null),this._contentNode=null,this._popper!=null&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){xn.has(e)?this._override("placement",e):this._clearOverride("placement")}get test(){return{rootNode:this._rootNode}}render(){var n;const{open:e,owner:t,renderContentFunction:o}=this;return g("div",{afterCreate:this._afterRootCreate,class:this.classes(Pt.base,e?Pt.open:null),lang:Ne(),styles:kn},g("div",{afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition,dir:ro((n=this.owner)==null?void 0:n.container)},e?o==null?void 0:o.call(t):null))}_buildPopper(){this._popper!=null&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(e==null||!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=zn(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:o}=this;o!=null&&(o.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),o.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return io(typeof e=="function"?e():e)}};d([O()],V.prototype,"anchorElement",void 0),d([O()],V.prototype,"container",null),d([O()],V.prototype,"offset",void 0),d([O()],V.prototype,"open",void 0),d([O()],V.prototype,"owner",null),d([O()],V.prototype,"placement",null),d([O()],V.prototype,"renderContentFunction",void 0),V=d([ze("esri.widgets.support.Popover")],V);const Dn=V,C="esri-date-picker",x={base:C,datePicker:`${C}__calendar`,monthPicker:`${C}__month-picker`,dayPicker:`${C}__day-picker`,week:`${C}__week-item`,nearbyMonth:`${C}__day-item--nearby-month`,activeDay:`${C}__day-item--active`,today:`${C}__day-item--today`,selectedDay:`${C}__day-item--selected`,day:`${C}__day-item`,dayHeader:`${C}__day-item--header`,yearPicker:`${C}__year-picker`,selectedYear:`${C}__year-picker-item--selected`,year:`${C}__year-picker-item`,monthDropdown:`${C}__month-dropdown`,date:`${C}__date`,datePickerToggle:`${C}__calendar-toggle`,dateInput:`${C}__input`,dateTextInput:`${C}__text-input`,leadingIcon:`${C}__icon--leading`},Tn=new Set([" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"]);let E=class extends Ze{constructor(e,t){super(e,t),this._calendarNode=null,this._inputOrButtonNode=null,this._rootNode=null,this._requestDayPickerFocusOnCreate=!1,this._activeDate=null,this._calendarPopover=new Dn({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._isOpen=!1,this.dateInputEnabled=!1,this.messages=null,this.commitOnMonthChange=!1,this.viewModel=new $t,this.disabled=!1,this.timeZone=void 0,this.toggle=this.toggle.bind(this)}initialize(){this.addHandles(Ke(()=>{var e;return{viewModel:this.viewModel,value:(e=this.viewModel)==null?void 0:e.value}},({viewModel:e,value:t})=>{!this.destroyed&&e&&this.onChange!=null&&this.onChange(t)},Zt))}destroy(){this._calendarPopover.destroy()}get _dateTimeFormatOptions(){return{year:"numeric",month:"2-digit",day:"2-digit",timeZone:this.timeZone||void 0}}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get isOpen(){return this._isOpen}render(){return g("div",{afterCreate:Ae,bind:this,class:this.classes(x.base,G.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this._renderInputAndButtonMode():this._renderButtonOnlyMode())}toggle(){this._isOpen?this.close():this.open()}open(e=!0){this._activeDate=se.fromJSDate(this.viewModel.value),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=e}close(e=!0){var t;this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,e&&((t=this._inputOrButtonNode)==null||t.focus())}_renderButtonOnlyMode(){const e=j(this.viewModel.value,this._dateTimeFormatOptions),{disabled:t,_isOpen:o,messages:n}=this;return g("div",{afterCreate:Ae,"aria-controls":o?this._getCalendarId():null,"aria-expanded":o.toString(),"aria-haspopup":"true","aria-label":n.setDate,"aria-pressed":o.toString(),bind:this,class:this.classes(G.widgetButton,G.select,x.datePickerToggle),"data-node-ref":"_inputOrButtonNode",key:`date-button-${t}`,onclick:this.toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:t?void 0:0},g("span",{class:x.date},e))}_renderInputAndButtonMode(){const e=j(this.viewModel.value,this._dateTimeFormatOptions),{_isOpen:t,messages:o}=this;return g("div",{class:this.classes(x.dateInput)},g("input",{afterCreate:Ae,"aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":o.setDate,bind:this,class:this.classes(x.dateTextInput,G.input),"data-node-ref":"_inputOrButtonNode",key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),g("span",{"aria-hidden":"true",class:this.classes(x.leadingIcon,he.calendar)}))}_handleDateInputClick(){this.open(!1)}_handleDateInputKeyDown(e){const{key:t}=e;this._isOpen?t==="Enter"?this._handleDateText(e):t==="Escape"&&this.close():t==="ArrowDown"&&(this.open(),e.preventDefault())}_handleDateButtonKeyDown(e){const{key:t,shiftKey:o}=e;this._isOpen&&t==="Tab"&&o?this.close():Me(t)&&this.toggle()}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e)}_handleDateText(e){const t=e.currentTarget;let o;try{o=ho(t.value,this._dateTimeFormatOptions)}catch(r){return Qt.getLogger(this).warn(r),void(t.value=j(this.viewModel.value,this._dateTimeFormatOptions))}const n=se.fromObject(o);n.isValid?(this.viewModel.value=n.toJSDate(),this._activeDate=n):t.value=j(this.viewModel.value,this._dateTimeFormatOptions)}_handleDatePickerKeydown(e){const{key:t}=e;t==="Escape"&&(this.close(),e.preventDefault(),e.stopPropagation())}_renderCalendar(){const e=this._activeDate;if(!e)return null;const t=se.fromJSDate(this.viewModel.value);return g("div",{afterCreate:Ae,bind:this,class:this.classes(x.datePicker,G.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onfocusout:this._onCalendarFocusOut,onkeydown:this._handleDatePickerKeydown,tabIndex:-1},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_onCalendarFocusOut(e){var o,n;const t=e.relatedTarget;t&&t instanceof Node&&((o=this._calendarNode)!=null&&o.contains(t)||(n=this._rootNode)!=null&&n.contains(t))||this.close(!1)}_renderMonthPicker(e){const t=ao(this.container),o=t?he.right:he.left,n=t?he.left:he.right,r=eo.months("long",{locale:Ne()}).map((i,s)=>{const u=e.month-1===s;return g("option",{selected:u,value:s.toString()},i)}),{disabled:a,messages:l}=this;return g("div",{class:x.monthPicker},g("div",{"aria-label":l.goToPreviousMonth,bind:this,class:G.button,key:`previous-month-${a}`,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:a?void 0:0,title:l.goToPreviousMonth},g("span",{"aria-hidden":"true",class:o})),g("select",{"aria-label":l.selectMonth,"aria-live":"assertive",bind:this,class:this.classes(x.monthDropdown,G.select),disabled:a,id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:l.selectMonth},r),g("div",{"aria-label":l.goToNextMonth,bind:this,class:G.button,key:`next-month-${a}`,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:a?void 0:0,title:l.goToNextMonth},g("span",{"aria-hidden":"true",class:n})))}_renderDayPicker(e,t){const o=this._getWeekLabels(),n=this._getDayId(e),r=this._renderMonth(e,t),{id:a,disabled:l}=this;return g("div",{afterCreate:this._handleDayPickerCreate,"aria-activedescendant":n,"aria-labelledby":`${a}__month-picker ${a}__selected-year`,bind:this,class:x.dayPicker,id:`${a}__day-picker`,key:`day-picker-${l}`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:l?void 0:0},g("div",{class:x.week,role:"row"},o.map(i=>g("div",{"aria-label":i.name,class:this.classes(x.day,x.dayHeader),role:"columnheader",title:i.name},i.abbr))),r)}_getDayId(e){return`${this.id}__${j(e.valueOf(),this._dateTimeFormatOptions)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}_getWeekLabels(){const e=[],t={weekday:"long"},o={weekday:"narrow"};let n=se.now().set({weekday:At(Ne())});for(let r=0;r<7;r++)e.push({name:j(n.valueOf(),t),abbr:j(n.valueOf(),o)}),n=n.plus({day:1});return e}_handleDayPickerKeydown(e){const{key:t,ctrlKey:o,shiftKey:n}=e;if(!Tn.has(t))return;let r=this._activeDate;if(r){if(t==="ArrowLeft")r=r.minus({day:1});else if(t==="ArrowRight")r=r.plus({day:1});else if(t==="ArrowUp")r=r.minus({week:1});else if(t==="ArrowDown")r=r.plus({week:1});else if(t==="PageUp"){const a=n?"year":"month";r=r.minus({[a]:1})}else if(t==="PageDown"){const a=n?"year":"month";r=r.plus({[a]:1})}else if(t==="Home"){const a=o?"year":"month";r=r.startOf(a)}else if(t==="End"){const a=o?"year":"month";r=r.endOf(a)}else Me(t)&&(this.viewModel.value=r.toJSDate(),this.close());this._activeDate=r,e.preventDefault(),e.stopPropagation()}}_renderMonth(e,t){const o=se.now(),n=e.startOf("month"),r=e.endOf("month"),a=6,l=7;let i=n.minus({day:mo(Ne(),n.weekday)});const s=[];for(let u=0;u<a;u++){const c=[];for(let h=0;h<l;h++){const y=i.day,f=i.hasSame(e,"day"),z=i.hasSame(t,"day"),m=this._getDayId(i),v=to.fromDateTimes(n,r),b={[x.nearbyMonth]:!v.contains(i),[x.today]:i.hasSame(o,"day"),[x.activeDay]:f,[x.selectedDay]:z};c.push(g("div",{"aria-label":y.toString(),"aria-selected":f.toString(),bind:this,class:this.classes(x.day,b),"data-iso-date":i.toISO(),id:m,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},y)),i=i.plus({day:1})}s.push(g("div",{class:x.week,role:"row"},c))}return s}_renderYearPicker(e){const t={year:"numeric"},o=e,n=j(o.valueOf(),t),r=j(o.plus({year:1}).valueOf(),t),a=j(o.minus({year:1}).valueOf(),t),{disabled:l,messages:i}=this;return g("div",{class:x.yearPicker},g("div",{"aria-label":i.goToPreviousYear,bind:this,class:x.year,key:`previous-year-${l}`,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:l?void 0:0,title:i.goToPreviousYear},a),g("div",{class:this.classes(x.year,x.selectedYear),id:`${this.id}__selected-year`},n),g("div",{"aria-label":i.goToNextYear,bind:this,class:x.year,key:`next-year-${l}`,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:l?void 0:0,title:i.goToNextYear},r))}_setMonth(e){const t=e.target,o=Number(t.value)+1;this._activeDate&&(this._activeDate=this._activeDate.set({month:o}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousMonth(){this._activeDate&&(this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_handlePreviousMonthKeyDown(e){if(e.key==="Tab"&&e.shiftKey)return e.preventDefault(),void this.close();Me(e.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate&&(this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.minus({year:1}))??null}_setNextYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.plus({year:1}))??null}_handleNextYearKeyDown(e){if(e.key==="Tab"&&!e.shiftKey)return e.preventDefault(),void this.close();Me(e.key)&&this._setNextYear()}_handleSelectedDate(e){const t=e.target;this.viewModel.value=se.fromISO(t.getAttribute("data-iso-date")).toJSDate(),this.close()}};d([O()],E.prototype,"_activeDate",void 0),d([O()],E.prototype,"_calendarPopover",void 0),d([O()],E.prototype,"_isOpen",void 0),d([O()],E.prototype,"_dateTimeFormatOptions",null),d([O()],E.prototype,"dateInputEnabled",void 0),d([O(),Et("esri/widgets/support/t9n/DatePicker")],E.prototype,"messages",void 0),d([O()],E.prototype,"value",null),d([O()],E.prototype,"commitOnMonthChange",void 0),d([O({type:$t})],E.prototype,"viewModel",void 0),d([O()],E.prototype,"onChange",void 0),d([O()],E.prototype,"disabled",void 0),d([O()],E.prototype,"timeZone",void 0),d([O()],E.prototype,"isOpen",null),d([Ye()],E.prototype,"_setNextMonth",null),d([Ye()],E.prototype,"_setPreviousYear",null),d([Ye()],E.prototype,"_handleSelectedDate",null),E=d([ze("esri.widgets.support.DatePicker")],E);const Nn=E;export{Nn as $,Y as d,Sn as f,Dn as j,In as l,$t as t};
