import{r as k,e as b,h as o,H as M,g as H}from"./index-8ERthB3p.js";import{s as O,a as B}from"./loadable-0092c6b2-CCLLZPvP.js";import{u as $,s as D,c as V,d as j}from"./t9n-e5ee6b09-BmFnC5TI.js";import{n as A,c as U,d as q}from"./locale-ccbc05e8-Cx61mxV1.js";import{g as G}from"./browser-26f0727c-UGQ_wQp7.js";import"./dom-bea5da81-_E6DDA15.js";import"./guid-9a252389-Cgw_FQNn.js";import"./key-c94e53b5-wu7cp3Vu.js";import"./observers-fe652afa-BKcjSNKG.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.6.0
 */const r={bordered:"bordered",striped:"striped",selectionArea:"selection-area",paginationArea:"pagination-area",container:"container",tableContainer:"table-container",tableFixed:"table--fixed",assistiveText:"assistive-text",selectionActions:"selection-actions"},f={selectionActions:"selection-actions",tableHeader:"table-header",tableFooter:"table-footer"},W=":host([scale=s]){--calcite-internal-table-cell-padding:0.25rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--2);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--3)}:host([scale=m]){--calcite-internal-table-cell-padding:0.5rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--1);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--2)}:host([scale=l]){--calcite-internal-table-cell-padding:1rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size-0);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--1)}:host{display:flex}.container{display:flex;block-size:100%;inline-size:100%;flex-direction:column}.table-container{overflow:auto;white-space:nowrap;border:1px solid var(--calcite-color-border-3)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}table{inline-size:100%;border-collapse:collapse;overflow-x:scroll}.table--fixed{table-layout:fixed}.bordered ::slotted(calcite-table-row){--calcite-table-row-border-color:var(--calcite-color-border-3)}.striped ::slotted(calcite-table-row:nth-child(2n+1)){--calcite-table-row-background:var(--calcite-color-foreground-2)}.selection-actions{display:flex;flex-direction:row;margin-inline-start:auto}.selection-area{display:flex;flex-direction:row;align-items:center;padding-block:var(--calcite-internal-table-cell-padding)}.selection-area calcite-chip:last-of-type{margin-inline-end:0.5rem}.selection-area calcite-chip:last-of-type:not(:first-of-type){margin-inline-start:0.5rem}.selection-area calcite-button{margin-inline-end:1rem}.pagination-area{display:flex;inline-size:100%;flex-direction:row;justify-content:center;padding-block:var(--calcite-internal-table-cell-padding)}calcite-pagination{flex:1;justify-content:center}:host([hidden]){display:none}[hidden]{display:none}",_=class{constructor(a){k(this,a),this.calciteTableSelect=b(this,"calciteTableSelect",6),this.calciteTablePageChange=b(this,"calciteTablePageChange",6),this.calciteInternalTableRowFocusChange=b(this,"calciteInternalTableRowFocusChange",6),this.getSlottedRows=t=>{var e;return(e=t==null?void 0:t.assignedElements({flatten:!0}))==null?void 0:e.filter(i=>i==null?void 0:i.matches("calcite-table-row"))},this.updateRows=()=>{var d,h,g;const t=this.getSlottedRows(this.tableHeadSlotEl)||[],e=this.getSlottedRows(this.tableBodySlotEl)||[],i=this.getSlottedRows(this.tableFootSlotEl)||[],n=[...t,...e,...i];t==null||t.forEach(s=>{const c=t==null?void 0:t.indexOf(s);s.rowType="head",s.positionSection=c,s.positionSectionLocalized=this.localizeNumber((c+1).toString())}),e==null||e.forEach(s=>{const c=e==null?void 0:e.indexOf(s);s.rowType="body",s.positionSection=c,s.positionSectionLocalized=this.localizeNumber((c+1).toString())}),i==null||i.forEach(s=>{const c=i==null?void 0:i.indexOf(s);s.rowType="foot",s.positionSection=c,s.positionSectionLocalized=this.localizeNumber((c+1).toString())}),n==null||n.forEach(s=>{s.interactionMode=this.interactionMode,s.selectionMode=this.selectionMode,s.bodyRowCount=e==null?void 0:e.length,s.positionAll=n==null?void 0:n.indexOf(s),s.numbered=this.numbered,s.scale=this.scale,s.readCellContentsToAT=this.readCellContentsToAT,s.lastVisibleRow=(n==null?void 0:n.indexOf(s))===n.length-1});const l=((d=t[0])==null?void 0:d.cellCount)||((g=(h=t[0])==null?void 0:h.querySelectorAll("calcite-table-header"))==null?void 0:g.length);this.colCount=l,this.headRows=t,this.bodyRows=e,this.footRows=i,this.allRows=n,this.updateSelectedItems(),this.paginateRows()},this.handlePaginationChange=()=>{var e;const t=(e=this.paginationEl)==null?void 0:e.startItem;this.pageStartRow=t||1,this.calciteTablePageChange.emit(),this.updateRows()},this.paginateRows=()=>{var t;(t=this.bodyRows)==null||t.forEach(e=>{const i=e.positionSection+1,n=i>=this.pageStartRow&&i<this.pageStartRow+this.pageSize;e.hidden=this.pageSize>0&&!n&&!this.footRows.includes(e),e.lastVisibleRow=i===this.pageStartRow+this.pageSize-1||i===this.bodyRows.length})},this.updateSelectedItems=t=>{var i,n;const e=(i=this.bodyRows)==null?void 0:i.filter(l=>l.selected);this.selectedItems=e,this.selectedCount=e==null?void 0:e.length,(n=this.allRows)==null||n.forEach(l=>{l.selectedRowCount=this.selectedCount,l.selectedRowCountLocalized=this.localizeNumber(this.selectedCount)}),t&&this.calciteTableSelect.emit()},this.handleDeselectAllRows=()=>{var t;(t=this.bodyRows)==null||t.forEach(e=>{e.selected=!1}),this.updateSelectedItems(!0)},this.setSelectedItems=t=>{var e;(e=this.bodyRows)==null||e.forEach(i=>{var n;(t==null?void 0:t.rowType)==="head"?i.selected=this.selectedCount!==((n=this.bodyRows)==null?void 0:n.length):i.selected=t===i?!i.selected:this.selectionMode==="multiple"?i.selected:!1}),this.updateSelectedItems(!0)},this.localizeNumber=t=>(A.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},A.localize(t.toString())),this.bordered=!1,this.caption=void 0,this.groupSeparator=!1,this.interactionMode="interactive",this.layout="auto",this.numbered=!1,this.numberingSystem=void 0,this.pageSize=0,this.scale="m",this.selectionMode="none",this.zebra=!1,this.striped=!1,this.selectedItems=[],this.messages=void 0,this.messageOverrides=void 0,this.colCount=0,this.pageStartRow=1,this.selectedCount=0,this.readCellContentsToAT=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}handleNumberedChange(){this.updateRows()}onMessagesChange(){}effectiveLocaleChange(){$(this,this.effectiveLocale)}async componentWillLoad(){O(this),await D(this),this.readCellContentsToAT=/safari/i.test(G()),this.updateRows()}componentDidLoad(){B(this)}connectedCallback(){U(this),V(this)}disconnectedCallback(){q(this),j(this)}calciteChipSelectListener(a){a.composedPath().includes(this.el)&&this.setSelectedItems(a.target)}calciteInternalTableRowFocusEvent(a){var S,C,w,y,z,v,R,x,T;const t=a.detail.cellPosition,e=a.detail.rowPosition,i=a.detail.destination,n=a.detail.lastCell,l=(S=this.bodyRows)==null?void 0:S.filter(u=>!u.hidden),d=(C=this.allRows)==null?void 0:C.filter(u=>!u.hidden),h=(w=this.headRows[this.headRows.length-1])==null?void 0:w.positionAll,g=(y=l[0])==null?void 0:y.positionAll,s=(z=l[l.length-1])==null?void 0:z.positionAll,c=(v=this.footRows[0])==null?void 0:v.positionAll,E=(R=d[d.length-1])==null?void 0:R.positionAll,L=i==="next"&&e===h,F=i==="previous"&&e===c,I=i==="previous"&&e===g,P=i==="next"&&e===s;let p;switch(i){case"first":p=0;break;case"last":p=E;break;case"next":p=L?g:P?c:e+1;break;case"previous":p=F?s:I?h:e-1;break}const m=(T=(x=this.allRows)==null?void 0:x.find(u=>u.positionAll===p))==null?void 0:T.cellCount,N=t>m?m:t;p!==void 0&&this.calciteInternalTableRowFocusChange.emit({cellPosition:N,rowPosition:p,destination:i,lastCell:n})}renderSelectionArea(){var l,d,h;const a=(d=(l=this.selectedItems)==null?void 0:l.filter(g=>g.hidden))==null?void 0:d.length,t=this.localizeNumber(a==null?void 0:a.toString()),i=`${this.localizeNumber((h=this.selectedCount)==null?void 0:h.toString())} ${this.messages.selected}`,n=`${t} ${this.messages.hiddenSelected}`;return o("div",{class:r.selectionArea},o("calcite-chip",{kind:this.selectedCount>0?"brand":"neutral",scale:this.scale,value:i},i),a>0&&o("calcite-chip",{icon:"hide-empty",scale:this.scale,title:n,value:n},t),this.selectedCount>0&&o("calcite-button",{"icon-start":"x",kind:"neutral",onClick:this.handleDeselectAllRows,round:!0,scale:this.scale,title:`${this.messages.clear} ${i} ${this.messages.row}`},this.messages.clear),o("div",{class:r.selectionActions},o("slot",{name:f.selectionActions})))}renderPaginationArea(){var a;return o("div",{class:r.paginationArea},o("calcite-pagination",{groupSeparator:this.groupSeparator,numberingSystem:this.numberingSystem,onCalcitePaginationChange:this.handlePaginationChange,pageSize:this.pageSize,scale:this.scale,startItem:1,totalItems:(a=this.bodyRows)==null?void 0:a.length,ref:t=>this.paginationEl=t}))}renderTHead(){return o("thead",null,o("slot",{name:f.tableHeader,onSlotchange:this.updateRows,ref:a=>this.tableHeadSlotEl=a}))}renderTBody(){return o("tbody",null,o("slot",{onSlotchange:this.updateRows,ref:a=>this.tableBodySlotEl=a}))}renderTFoot(){return o("tfoot",null,o("slot",{name:f.tableFooter,onSlotchange:this.updateRows,ref:a=>this.tableFootSlotEl=a}))}render(){var a;return o(M,null,o("div",{class:r.container},this.selectionMode!=="none"&&this.renderSelectionArea(),o("div",{class:{[r.bordered]:this.bordered,[r.striped]:this.striped||this.zebra,[r.tableContainer]:!0}},o("table",{"aria-colcount":this.colCount,"aria-multiselectable":this.selectionMode==="multiple","aria-rowcount":(a=this.allRows)==null?void 0:a.length,class:{[r.tableFixed]:this.layout==="fixed"},role:this.interactionMode==="interactive"?"grid":"table"},o("caption",{class:r.assistiveText},this.caption),this.renderTHead(),this.renderTBody(),this.renderTFoot())),this.pageSize>0&&this.renderPaginationArea()))}static get assetsDirs(){return["assets"]}get el(){return H(this)}static get watchers(){return{groupSeparator:["handleNumberedChange"],interactionMode:["handleNumberedChange"],numbered:["handleNumberedChange"],numberingSystem:["handleNumberedChange"],pageSize:["handleNumberedChange"],scale:["handleNumberedChange"],selectionMode:["handleNumberedChange"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}};_.style=W;export{_ as calcite_table};
