import{o as n,y as r,X as I,bO as yt,dV as vt,dS as mt,bE as gt,cr as ft,ej as wt,lZ as X,gJ as F,hm as q,a7 as Ot,b0 as z,ci as _t,di as It,l_ as K,g5 as tt,dj as et}from"./index-8ERthB3p.js";import{m as f,i as Q,c as B,T as xt,l as H,h as G,a as bt,U as kt,s as Tt}from"./quantityUtils-9zDVxeky.js";import Vt from"./GraphicsLayer-CapLCpoe.js";import{a as $t}from"./dehydratedFeatureComparison-DdCJ1gSj.js";import{w as Gt,m as Et}from"./elevationInfoUtils-sHEwmo9N.js";import{L as it,v as Ct,T as ot,b as St,j as zt,R as nt,d as Mt}from"./createUtils-CzMRA5VU.js";import{e as L}from"./helpMessageUtils-M95XMmyR.js";import{F as Ut,M as rt}from"./surfaceCoordinateSystems-mGV_LGb6.js";import{l as Pt}from"./InteractiveToolBase-yKkEJSmV.js";import{w as st,q as V,v as Rt,x as At}from"./angularMeasurementUtils-CATp35qy.js";import{l as ut}from"./SketchViewModel-DKgcTZ3K.js";import{r as E,u as Dt}from"./Tooltip-lxtA1b5H.js";import{u as at}from"./automaticAreaMeasurementUtils-G1AtsSdr.js";import{c as Ft,m as M,R as Ht,v as Lt}from"./automaticLengthMeasurementUtils-Bo1iBsUk.js";import{k as lt,o as $,j as pt,f as Nt,M as Zt,e as jt,u as N,l as ct}from"./vec2-Dt9Foiri.js";import{J as P,W as Qt}from"./boundedPlane-CLJ-Xnn_.js";import{t as C}from"./plane-Du3EYICn.js";import{t as Bt,a as Jt,e as Yt,c as Wt}from"./EditGeometryOperations-3XHFCAp6.js";let h=class extends yt{constructor(e){super(e),this.actual=null,this.committed=null,this.id=vt(),this.inputValue=null,this.readOnly=!1,this.unlockOnVertexPlacement=!0,this.visible=!0}get dirty(){return this.inputValue!=null}get locked(){return this.committed!=null}lock(e){this.inputValue=null,this.committed=e??this.actual}unlock(){this.committed=null,this.inputValue=null}};n([r()],h.prototype,"actual",void 0),n([r()],h.prototype,"committed",void 0),n([r()],h.prototype,"createQuantity",void 0),n([r()],h.prototype,"dirty",null),n([r()],h.prototype,"format",void 0),n([r()],h.prototype,"id",void 0),n([r()],h.prototype,"inputValue",void 0),n([r()],h.prototype,"locked",null),n([r()],h.prototype,"name",void 0),n([r()],h.prototype,"readOnly",void 0),n([r()],h.prototype,"suffix",void 0),n([r()],h.prototype,"title",void 0),n([r()],h.prototype,"toInputUnits",void 0),n([r()],h.prototype,"unlockOnVertexPlacement",void 0),n([r()],h.prototype,"visible",void 0),h=n([I("esri.views.interactive.tooltip.fields.TooltipField")],h);let U=class extends h{constructor(t){super(t),this.mode="absolute-height"}normalizeCtorArgs(t){const e=i=>i.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:f,createQuantity:(i,o)=>Q(i,e(o)),toInputUnits:(i,o)=>B(i,e(o)),format:(i,o)=>o.formatters.verticalLength(i),suffix:i=>i.inputUnitInfos.verticalLength.abbreviation,title:i=>i.messages.sketch.elevation,unlockOnVertexPlacement:!1,...t}}};n([r()],U.prototype,"mode",void 0),U=n([I("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],U);const dt=t=>{const e=i=>i.inputUnitInfos.direction.unit;return new h({name:"direction",actual:xt,createQuantity:(i,o)=>H(i,e(o),"geographic"),toInputUnits:({value:i,unit:o,rotationType:a},s)=>{const l=st(H(i,o,a),s.sketchOptions.values.effectiveDirectionMode),d=e(s),c=mt(l.value,"degrees",d);return H(c,d,"geographic")},format:(i,{formatters:o,sketchOptions:a})=>{const s=a.values.effectiveDirectionMode,l=st(i,s);switch(s){case V.Absolute:return o.direction(l);case V.Relative:return o.directionRelative(l);case V.RelativeBilateral:return o.directionRelativeBilateral(l)}},suffix:i=>i.inputUnitInfos.direction.abbreviation,title:({messages:i,sketchOptions:o})=>{switch(o.values.effectiveDirectionMode){case V.Absolute:return i.sketch.direction.absolute;case V.Relative:case V.RelativeBilateral:return i.sketch.direction.relative}},...t})},j=t=>{const e=i=>i.inputUnitInfos.length.unit;return new h({name:"distance",actual:f,createQuantity:(i,o)=>{const a=Math.max(i,0);return Q(a,e(o))},toInputUnits:(i,o)=>B(i,e(o)),format:(i,o)=>o.formatters.length(i),suffix:i=>i.inputUnitInfos.length.abbreviation,title:i=>i.messages.sketch.distance,...t})},R=t=>new U(t),Xt=t=>{const e=i=>i.inputUnitInfos.area.unit;return new h({name:"area",actual:G,createQuantity:(i,o)=>bt(i,e(o)),toInputUnits:(i,o)=>B(i,e(o)),format:(i,o)=>o.formatters.area(i),suffix:i=>i.inputUnitInfos.area.abbreviation,title:i=>i.messages.sketch.area,...t})};let k=class extends E{constructor(e){super(e),this.type="draw-point",this.elevation=R()}get allFields(){return[this.elevation]}};n([r()],k.prototype,"type",void 0),n([r()],k.prototype,"elevation",void 0),n([r()],k.prototype,"allFields",null),n([r()],k.prototype,"helpMessage",void 0),k=n([I("esri.views.interactive.tooltip.DrawPointTooltipInfo")],k);let w=class extends E{constructor(t){super(t),this.type="draw-polyline",this.direction=dt(),this.distance=j({title:e=>e.messages.sketch.distance}),this.elevation=R(),this.totalLength=j({format:(e,i)=>i.formatters.totalLength(e),title:e=>e.messages.sketch.totalLength,readOnly:!0})}get allFields(){return[this.direction,this.distance,this.elevation,this.totalLength]}};n([r()],w.prototype,"type",void 0),n([r()],w.prototype,"direction",void 0),n([r()],w.prototype,"distance",void 0),n([r()],w.prototype,"elevation",void 0),n([r()],w.prototype,"totalLength",void 0),n([r()],w.prototype,"allFields",null),n([r()],w.prototype,"helpMessage",void 0),w=n([I("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],w);let O=class extends E{constructor(t){super(t),this.type="draw-polygon",this.direction=dt(),this.distance=j({title:e=>e.messages.sketch.distance}),this.elevation=R(),this.area=Xt({readOnly:!0})}get allFields(){return[this.direction,this.distance,this.elevation,this.area]}};n([r()],O.prototype,"type",void 0),n([r()],O.prototype,"distance",void 0),n([r()],O.prototype,"elevation",void 0),n([r()],O.prototype,"area",void 0),n([r()],O.prototype,"allFields",null),n([r()],O.prototype,"helpMessage",void 0),O=n([I("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],O);let T=class extends E{constructor(e){super(e),this.type="draw-mesh",this.elevation=R()}get allFields(){return[this.elevation]}};n([r()],T.prototype,"type",void 0),n([r()],T.prototype,"elevation",void 0),n([r()],T.prototype,"allFields",null),n([r()],T.prototype,"helpMessage",void 0),T=n([I("esri.views.interactive.tooltip.DrawMeshTooltipInfo")],T);let x=class extends E{constructor(e){super(e),this.type="draw-rectangle",this.xSize=f,this.ySize=f,this.area=G}get allFields(){return[]}};n([r()],x.prototype,"type",void 0),n([r()],x.prototype,"xSize",void 0),n([r()],x.prototype,"ySize",void 0),n([r()],x.prototype,"area",void 0),n([r()],x.prototype,"allFields",null),x=n([I("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],x);let _=class extends E{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=G}get allFields(){return[]}};n([r()],_.prototype,"type",void 0),n([r()],_.prototype,"radius",void 0),n([r()],_.prototype,"xSize",void 0),n([r()],_.prototype,"ySize",void 0),n([r()],_.prototype,"area",void 0),n([r()],_.prototype,"allFields",null),_=n([I("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],_);class qt{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}let p=class extends gt.EventedMixin(Pt){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new ut}initialize(){this.internalGraphicsLayer=new Vt({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const t=this.drawOperation=this.makeDrawOperation(),{sketchOptions:e}=this,i=this.view.type;this.tooltipInfos={point:new k({sketchOptions:e,viewType:i}),polyline:new w({sketchOptions:e,viewType:i}),polygon:new O({sketchOptions:e,viewType:i}),mesh:new T({sketchOptions:e,viewType:i}),rectangle:new x({sketchOptions:e}),circle:new _({sketchOptions:e})},this.tooltip=new Dt({view:this.view}),this._initializeConstraints(),this.addHandles([t.on("vertex-add",o=>this.onVertexAdd(o)),t.on("vertex-remove",o=>this.onVertexRemove(o)),t.on("vertex-update",o=>this.onVertexUpdate(o)),t.on("cursor-update",o=>this.onCursorUpdate(o)),t.on("cursor-remove",()=>this._updateGraphic()),t.on("complete",o=>this.onComplete(o)),ft(()=>this.cursor,o=>t.cursor=o,wt),X(()=>this._updateTooltipInfo()),X(()=>{t.constraintZ=this._constraintZ})]),this.finishToolCreation()}destroy(){this.drawOperation=F(this.drawOperation),this.tooltip=F(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=F(this.internalGraphicsLayer),this._set("view",null)}get _defaultElevation(){const t=q(this.drawOperation.coordinateHelper.spatialReference);return Q(this.defaultZ*t,"meters")}get _inputModeAvailable(){var i;const{inputEnabled:t,visibleElements:e}=this.sketchOptions.tooltips;return t&&((i=this.activeTooltipInfo)==null?void 0:i.editableFields.some(o=>e[o.name]===!0))===!0}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),this._graphic!=null&&(this._graphic.symbol=t)}get updating(){var t;return((t=this.drawOperation)==null?void 0:t.updating)??!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){if(!this.destroyed)return t.type==="key-down"&&t.key===Rt.enterInputMode&&this._inputModeAvailable?(this.tooltip.enterInputMode(),void t.stopPropagation()):void this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),this.drawOperation.numCommittedVertices===0&&this._initializeConstraints()}_destroyAllVisualizations(){this.removeHandles(v.outline),this.removeHandles(v.regularVertices),this.removeHandles(v.activeVertex),this.removeHandles(v.activeEdge),this.removeHandles(Z)}_createOrUpdateGraphic(t){if(this._graphic!=null)return this.updateGraphicGeometry(t),this._graphic;const e=new Ot({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles(z(()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)}),Z),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){var J,Y;if(this.drawOperation==null)return;const{coordinateHelper:e,view:i,visualizationCursorVertex:o,lastVertex:a,committedVertices:s,geometryIncludingUncommittedVertices:l,numCommittedVertices:d}=this.drawOperation;if(!(d>0||o!=null))return;const c=t.operationComplete?s:l,y=c.length,m=o!=null?e.pointToArray(o):null,g=i.spatialReference,A=i.type==="3d"&&i.viewingMode==="global",u=new qt;u.committedVertices=s,u.cursorVertex=m;const{geometryType:D}=this;switch(D){case"point":case"mesh":u.full=e.arrayToPoint(c[0]);break;case"multipoint":u.full=y>0?Mt(c,g):null;break;case"polyline":case"polygon":y>0&&(u.full=D==="polygon"?zt([c],g,A,!0):nt([c],g,A),u.cursorEdge=m!=null&&a&&!$t(o,a)?nt([[m,e.pointToArray(a)]],g,A):null,u.outline=y>1?u.full:null);break;case"circle":case"rectangle":{if(u.committedVertices=u.cursorVertex=null,!y)break;const b=Ut(i,c[0]),S=c[0],W=b.makeMapPoint(S[0]+Kt*i.resolution,S[1]);D==="circle"?y===1&&t.operationComplete?u.circle=it([S,W],b,!0):y===2&&(this.forceUniformSize?u.circle=it(c,b,this.centered):u.rectangle=Ct(c,b,this.centered)):y===1&&t.operationComplete?u.rectangle=ot([S,W],b,!0):y===2&&(u.rectangle=this.forceUniformSize?ot(c,b,this.centered):St(c,b,this.centered)),u.full=u.circle!=null?u.circle.geometry:(J=u.rectangle)==null?void 0:J.geometry,u.outline=((Y=u.full)==null?void 0:Y.type)==="polygon"?u.full:null;break}default:return null}return u}initializeGraphic(t){return z()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const i=this._getCreateOperationGeometry({operationComplete:!0});i!=null&&(e=this._createOrUpdateGraphic(i.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return z()}onCursorEdgeChanged(t){return z()}onVertexAdd(t){var e;this._updateGraphic(),this._unlockConstraintsOnVertexAddOrRemove(),this._lockElevationOnVertexAdd((e=t.vertices.at(0))==null?void 0:e.coordinates),this.emit("vertex-add",t)}onVertexRemove(t){this._updateGraphic(),this._unlockConstraintsOnVertexAddOrRemove(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,t!=null?(t.cursorEdge!=null?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),v.activeEdge):this.removeHandles(v.activeEdge),t.outline!=null?this.addHandles(this.onOutlineChanged(t.outline),v.outline):this.removeHandles(v.outline),t.committedVertices!=null?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),v.regularVertices):this.removeHandles(v.regularVertices),t.cursorVertex!=null?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),v.activeVertex):this.removeHandles(v.activeVertex),t.full!=null?this._createOrUpdateGraphic(t.full):this.removeHandles(Z)):this._destroyAllVisualizations()}get activeTooltipInfo(){var s;const{drawOperation:t,graphic:e,view:i}=this;if(!t)return null;const o=this.tooltipInfos,a=(s=e==null?void 0:e.geometry)==null?void 0:s.type;switch(this.geometryType){case"point":return i.type==="2d"&&this.defaultZ===0?null:a==="point"?o.point:null;case"polyline":return a==="polyline"?o.polyline:null;case"polygon":return a==="polygon"?o.polygon:null;case"rectangle":return a==="polygon"?o.rectangle:null;case"circle":return a==="polygon"?o.circle:null;case"mesh":return a==="mesh"?o.mesh:null;default:return null}}_updateTooltipInfo(){const{activeTooltipInfo:t,tooltip:e,sketchOptions:i}=this;switch(t==null?void 0:t.type){case"draw-point":this._updateDrawPointTooltipInfo(t);break;case"draw-polyline":this._updateDrawPolylineTooltipInfo(t);break;case"draw-polygon":this._updateDrawPolygonTooltipInfo(t);break;case"draw-rectangle":this._updateDrawRectangleTooltipInfo(t);break;case"draw-circle":this._updateDrawCircleTooltipInfo(t);break;case"draw-mesh":this.updateDrawMeshTooltipInfo(t)}e.view=this.view,e.info=i.tooltips.effectiveEnabled?t:null}_updateDrawPointTooltipInfo(t){const{drawOperation:e,graphic:i,view:o,sketchOptions:a}=this,{coordinateHelper:s,cursorVertex:l}=e;if(t.sketchOptions=a,t.viewType=o.type,t.helpMessage=L("point",i==null?void 0:i.geometry),this.updateElevation(t.elevation),!l)return void(e.constraintInfo=void 0);const d=rt(l,o,s.spatialReference,this._constraintElevationInfo,s.hasZ(),a.values.effectiveDirectionMode);e.constraintInfo={context:d,distance:null,direction:null,elevation:t.elevation.committed}}_updateDrawPolylineTooltipInfo(t){const e=this._createOperationGeometry,i=e!=null?e.full:null;if((i==null?void 0:i.type)!=="polyline")return;this._updatePolylineOrPolygonCommon(t);const o=Ft(i);t.totalLength.actual=o??f,t.sketchOptions=this.sketchOptions,t.viewType=this.view.type,t.helpMessage=L("polyline",i)}_updateDrawPolygonTooltipInfo(t){const e=this._createOperationGeometry,i=e!=null?e.full:null;if((i==null?void 0:i.type)!=="polygon")return;this._updatePolylineOrPolygonCommon(t);const o=at(i);t.area.actual=o??G,t.sketchOptions=this.sketchOptions,t.viewType=this.view.type,t.helpMessage=L("polygon",i)}_updatePolylineOrPolygonCommon(t){const{view:e,drawOperation:i,sketchOptions:o}=this,{coordinateHelper:a,cursorVertex:s,lastVertex:l,secondToLastVertex:d}=i,c=o.values.effectiveDirectionMode,y=l&&s?M(l,s):null;if(t.distance.actual=y??f,t.distance.readOnly=l==null,t.direction.actual=null,t.direction.readOnly=!0,l&&s&&(c==="absolute"||d)){const g=At(d,l,s,c);t.direction.actual=g??kt,t.direction.readOnly=!1}this.updateElevation(t.elevation);const m=s??l;if(m){const g=rt(m,e,a.spatialReference,this._constraintElevationInfo,a.hasZ(),c);i.constraintInfo={context:g,distance:t.distance.committed,direction:t.direction.committed,elevation:t.elevation.committed}}else i.constraintInfo=void 0}updateDrawMeshTooltipInfo(t){}_updateDrawRectangleTooltipInfo(t){t.sketchOptions=this.sketchOptions,t.xSize=this._xSize??f,t.ySize=this._ySize??f,t.area=this._fullGeometryArea??G}_updateDrawCircleTooltipInfo(t){const{forceUniformSize:e}=this;t.sketchOptions=this.sketchOptions,t.radius=e?this._circleRadius??f:null,t.xSize=e?null:this._xSize??f,t.ySize=e?null:this._ySize??f,t.area=this._fullGeometryArea??G}get _circleRadius(){var e;const t=this._createOperationGeometry;return((e=t==null?void 0:t.circle)==null?void 0:e.center)!=null&&t.circle.edge!=null?M(t.circle.center,t.circle.edge):null}get _xSize(){var e,i;const t=(i=(e=this._createOperationGeometry)==null?void 0:e.rectangle)==null?void 0:i.midpoints;return t!=null?M(t.left,t.right):null}get _ySize(){var e,i;const t=(i=(e=this._createOperationGeometry)==null?void 0:e.rectangle)==null?void 0:i.midpoints;return t!=null?M(t.top,t.bottom):null}get _fullGeometryArea(){var e;const t=(e=this._createOperationGeometry)==null?void 0:e.full;return(t==null?void 0:t.type)!=="polygon"?null:at(t)}updateElevation(t){const{drawOperation:e}=this,i=(e==null?void 0:e.cursorVertex)??(e==null?void 0:e.lastVertex);t.actual=Ht(i)??this._defaultElevation,t.visible=this.view.type==="3d"&&this.hasZ,t.readOnly=!1}get _constraintElevationInfo(){var t;return((t=this.drawOperation)==null?void 0:t.elevationInfo)??Gt}get _constraintZ(){const{geometryType:t}=this;switch(t){case"point":case"mesh":case"polyline":case"polygon":{const e=this.tooltipInfos[t].elevation.committed;if(!e)return;const i=this.drawOperation.coordinateHelper.spatialReference;return Tt(e,"meters")/q(i)}default:return}}_initializeConstraints(){const{directionOptions:t,drawOperation:e,geometryType:i,tooltipInfos:o,sketchOptions:a}=this,s=d=>{var m;const c=(m=e.elevationInfo)==null?void 0:m.mode,y=o[d].elevation;c==="relative-to-ground"||c==="relative-to-scene"||c==="on-the-ground"?y.lock(this._defaultElevation):y.unlock()},l=d=>{if(t){const c=o[d].direction;c.committed=t.angle,c.unlockOnVertexPlacement=!1,a.values.directionMode=t.mode}};switch(i){case"polygon":case"polyline":s(i),l(i);break;case"point":case"mesh":s(i)}}_lockElevationOnVertexAdd(t){const{activeTooltipInfo:e,drawOperation:i,view:o}=this,a=this._constraintElevationInfo;if(o.type==="2d"||!t||a.mode!=="absolute-height"||(i==null?void 0:i.numCommittedVertices)!==1||!e||e.type!=="draw-polyline"&&e.type!=="draw-polygon"||e.elevation.locked)return;const[s,l,d]=t,c=this._getConvertedVertexElevation(s,l,d,a);c!=null&&e.elevation.lock(c)}_unlockConstraintsOnVertexAddOrRemove(){var t;(t=this.activeTooltipInfo)==null||t.allFields.forEach(e=>{e.unlockOnVertexPlacement&&e.unlock()})}_getConvertedVertexElevation(t,e,i,o){const{view:a,drawOperation:s}=this;if(a.type!=="3d"||!s)return;const{spatialReference:l}=s.coordinateHelper;i??(i=0);const d=s.elevationInfo,c=Et(a,t,e,i,l,d,o);return Lt(c,l)??this._defaultElevation}};n([r()],p.prototype,"_createOperationGeometry",void 0),n([r()],p.prototype,"_defaultElevation",null),n([r()],p.prototype,"_inputModeAvailable",null),n([r({value:!0})],p.prototype,"centered",null),n([r()],p.prototype,"cursor",null),n([r({nonNullable:!0})],p.prototype,"defaultZ",void 0),n([r({constructOnly:!0})],p.prototype,"directionOptions",void 0),n([r()],p.prototype,"drawOperation",void 0),n([r({value:!0})],p.prototype,"enabled",null),n([r({value:!0})],p.prototype,"forceUniformSize",null),n([r({constructOnly:!0})],p.prototype,"geometryType",void 0),n([r()],p.prototype,"graphic",null),n([r({constructOnly:!0})],p.prototype,"graphicProperties",void 0),n([r()],p.prototype,"graphicSymbol",null),n([r({constructOnly:!0})],p.prototype,"hasZ",void 0),n([r({constructOnly:!0})],p.prototype,"geometryToPlace",void 0),n([r({constructOnly:!0})],p.prototype,"mode",void 0),n([r()],p.prototype,"snappingManager",void 0),n([r()],p.prototype,"snapToScene",void 0),n([r()],p.prototype,"tooltip",void 0),n([r()],p.prototype,"tooltipInfos",void 0),n([r({constructOnly:!0,type:ut})],p.prototype,"sketchOptions",void 0),n([r({readOnly:!0})],p.prototype,"updating",null),n([r({constructOnly:!0,nonNullable:!0})],p.prototype,"view",void 0),n([r()],p.prototype,"activeTooltipInfo",null),n([r()],p.prototype,"_circleRadius",null),n([r()],p.prototype,"_xSize",null),n([r()],p.prototype,"_ySize",null),n([r()],p.prototype,"_fullGeometryArea",null),n([r()],p.prototype,"_constraintElevationInfo",null),n([r()],p.prototype,"_constraintZ",null),p=n([I("esri.views.draw.DrawGraphicTool")],p);const Z=Symbol("create-operation-graphic"),v={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function ke(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const Kt=48;function Te(t,e){return ht(t,e,!1)}function Ve(t,e){return ht(t,e,!0)}function ht(t,e,i){if(t instanceof Bt){if(t.operation instanceof Jt)return te(t.operation,e,i),!0;if(t.operation instanceof Yt)return ee(t.operation,e,i),!0;if(t.operation instanceof Wt)return ie(t.operation,e,i),!0}return!1}function te(t,e,i=!1){const o=i?-1:1,a=_t(o*t.dx,o*t.dy,o*t.dz);It(e.origin,e.origin,a),P(e)}function ee(t,e,i=!1){const o=i?-t.angle:t.angle;K(e.basis1,e.basis1,tt,o),K(e.basis2,e.basis2,tt,o),P(e)}function ie(t,e,i=!1){const o=i?1/t.factor1:t.factor1,a=i?1/t.factor2:t.factor2;et(e.basis1,e.basis1,o),et(e.basis2,e.basis2,a),lt(e.origin,e.origin,t.origin,t.axis1,o),lt(e.origin,e.origin,t.origin,t.axis2,a),P(e)}function $e(t,e,i,o){o||(o=Qt());const a=$(C.get(),t[1],-t[0]),s=$(C.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),l=$(C.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),d=C.get();e.components.forEach(m=>m.vertices.forEach(({pos:g})=>{$(d,pt(t,g),pt(a,g)),Nt(s,s,d),Zt(l,l,d)}));const c=1e-6,y=$(C.get(),l[0]-s[0]<c?i/2:0,l[1]-s[1]<c?i/2:0);return jt(s,s,y),N(l,l,y),ct(o.basis1,t,(l[0]-s[0])/2),ct(o.basis2,a,(l[1]-s[1])/2),$(o.origin,s[0]*t[0]+s[1]*a[0],s[0]*t[1]+s[1]*a[1]),N(o.origin,o.origin,o.basis1),N(o.origin,o.origin,o.basis2),P(o),o}export{Ve as E,$e as F,p as J,ke as W,Te as d,R as v};
